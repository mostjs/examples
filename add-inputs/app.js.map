{"version":3,"file":"app.js","sources":["../node_modules/@most/prelude/dist/index.es.js","../node_modules/@most/scheduler/dist/index.es.js","../node_modules/@most/disposable/dist/index.es.js","../node_modules/@most/core/dist/index.es.js","../node_modules/@most/dom-event/node_modules/@most/scheduler/dist/index.es.js","../node_modules/@most/dom-event/dist/index.es.js","index.js"],"sourcesContent":["/** @license MIT License (c) copyright 2010-2016 original author or authors */\n\n// Non-mutating array operations\n\n// cons :: a -> [a] -> [a]\n// a with x prepended\nfunction cons(x, a) {\n  var l = a.length;\n  var b = new Array(l + 1);\n  b[0] = x;\n  for (var i = 0; i < l; ++i) {\n    b[i + 1] = a[i];\n  }\n  return b;\n}\n\n// append :: a -> [a] -> [a]\n// a with x appended\nfunction append(x, a) {\n  var l = a.length;\n  var b = new Array(l + 1);\n  for (var i = 0; i < l; ++i) {\n    b[i] = a[i];\n  }\n\n  b[l] = x;\n  return b;\n}\n\n// drop :: Int -> [a] -> [a]\n// drop first n elements\nfunction drop(n, a) {\n  // eslint-disable-line complexity\n  if (n < 0) {\n    throw new TypeError('n must be >= 0');\n  }\n\n  var l = a.length;\n  if (n === 0 || l === 0) {\n    return a;\n  }\n\n  if (n >= l) {\n    return [];\n  }\n\n  return unsafeDrop(n, a, l - n);\n}\n\n// unsafeDrop :: Int -> [a] -> Int -> [a]\n// Internal helper for drop\nfunction unsafeDrop(n, a, l) {\n  var b = new Array(l);\n  for (var i = 0; i < l; ++i) {\n    b[i] = a[n + i];\n  }\n  return b;\n}\n\n// tail :: [a] -> [a]\n// drop head element\nfunction tail(a) {\n  return drop(1, a);\n}\n\n// copy :: [a] -> [a]\n// duplicate a (shallow duplication)\nfunction copy(a) {\n  var l = a.length;\n  var b = new Array(l);\n  for (var i = 0; i < l; ++i) {\n    b[i] = a[i];\n  }\n  return b;\n}\n\n// map :: (a -> b) -> [a] -> [b]\n// transform each element with f\nfunction map(f, a) {\n  var l = a.length;\n  var b = new Array(l);\n  for (var i = 0; i < l; ++i) {\n    b[i] = f(a[i]);\n  }\n  return b;\n}\n\n// reduce :: (a -> b -> a) -> a -> [b] -> a\n// accumulate via left-fold\nfunction reduce(f, z, a) {\n  var r = z;\n  for (var i = 0, l = a.length; i < l; ++i) {\n    r = f(r, a[i], i);\n  }\n  return r;\n}\n\n// replace :: a -> Int -> [a]\n// replace element at index\nfunction replace(x, i, a) {\n  // eslint-disable-line complexity\n  if (i < 0) {\n    throw new TypeError('i must be >= 0');\n  }\n\n  var l = a.length;\n  var b = new Array(l);\n  for (var j = 0; j < l; ++j) {\n    b[j] = i === j ? x : a[j];\n  }\n  return b;\n}\n\n// remove :: Int -> [a] -> [a]\n// remove element at index\nfunction remove(i, a) {\n  // eslint-disable-line complexity\n  if (i < 0) {\n    throw new TypeError('i must be >= 0');\n  }\n\n  var l = a.length;\n  if (l === 0 || i >= l) {\n    // exit early if index beyond end of array\n    return a;\n  }\n\n  if (l === 1) {\n    // exit early if index in bounds and length === 1\n    return [];\n  }\n\n  return unsafeRemove(i, a, l - 1);\n}\n\n// unsafeRemove :: Int -> [a] -> Int -> [a]\n// Internal helper to remove element at index\nfunction unsafeRemove(i, a, l) {\n  var b = new Array(l);\n  var j = void 0;\n  for (j = 0; j < i; ++j) {\n    b[j] = a[j];\n  }\n  for (j = i; j < l; ++j) {\n    b[j] = a[j + 1];\n  }\n\n  return b;\n}\n\n// removeAll :: (a -> boolean) -> [a] -> [a]\n// remove all elements matching a predicate\nfunction removeAll(f, a) {\n  var l = a.length;\n  var b = new Array(l);\n  var j = 0;\n  for (var x, i = 0; i < l; ++i) {\n    x = a[i];\n    if (!f(x)) {\n      b[j] = x;\n      ++j;\n    }\n  }\n\n  b.length = j;\n  return b;\n}\n\n// findIndex :: a -> [a] -> Int\n// find index of x in a, from the left\nfunction findIndex(x, a) {\n  for (var i = 0, l = a.length; i < l; ++i) {\n    if (x === a[i]) {\n      return i;\n    }\n  }\n  return -1;\n}\n\n// isArrayLike :: * -> boolean\n// Return true iff x is array-like\nfunction isArrayLike(x) {\n  return x != null && typeof x.length === 'number' && typeof x !== 'function';\n}\n\n/** @license MIT License (c) copyright 2010-2016 original author or authors */\n\n// id :: a -> a\nvar id = function id(x) {\n  return x;\n};\n\n// compose :: (b -> c) -> (a -> b) -> (a -> c)\nvar compose = function compose(f, g) {\n  return function (x) {\n    return f(g(x));\n  };\n};\n\n// apply :: (a -> b) -> a -> b\nvar apply = function apply(f, x) {\n  return f(x);\n};\n\n// curry2 :: ((a, b) -> c) -> (a -> b -> c)\nfunction curry2(f) {\n  function curried(a, b) {\n    switch (arguments.length) {\n      case 0:\n        return curried;\n      case 1:\n        return function (b) {\n          return f(a, b);\n        };\n      default:\n        return f(a, b);\n    }\n  }\n  return curried;\n}\n\n// curry3 :: ((a, b, c) -> d) -> (a -> b -> c -> d)\nfunction curry3(f) {\n  function curried(a, b, c) {\n    // eslint-disable-line complexity\n    switch (arguments.length) {\n      case 0:\n        return curried;\n      case 1:\n        return curry2(function (b, c) {\n          return f(a, b, c);\n        });\n      case 2:\n        return function (c) {\n          return f(a, b, c);\n        };\n      default:\n        return f(a, b, c);\n    }\n  }\n  return curried;\n}\n\n// curry4 :: ((a, b, c, d) -> e) -> (a -> b -> c -> d -> e)\nfunction curry4(f) {\n  function curried(a, b, c, d) {\n    // eslint-disable-line complexity\n    switch (arguments.length) {\n      case 0:\n        return curried;\n      case 1:\n        return curry3(function (b, c, d) {\n          return f(a, b, c, d);\n        });\n      case 2:\n        return curry2(function (c, d) {\n          return f(a, b, c, d);\n        });\n      case 3:\n        return function (d) {\n          return f(a, b, c, d);\n        };\n      default:\n        return f(a, b, c, d);\n    }\n  }\n  return curried;\n}\n\n/** @license MIT License (c) copyright 2016 original author or authors */\n\nexport { cons, append, drop, tail, copy, map, reduce, replace, remove, removeAll, findIndex, isArrayLike, id, compose, apply, curry2, curry3, curry4 };\n//# sourceMappingURL=index.es.js.map\n","import { curry2, curry3, findIndex, removeAll } from '@most/prelude';\n\nvar asyncGenerator = function () {\n  function AwaitValue(value) {\n    this.value = value;\n  }\n\n  function AsyncGenerator(gen) {\n    var front, back;\n\n    function send(key, arg) {\n      return new Promise(function (resolve, reject) {\n        var request = {\n          key: key,\n          arg: arg,\n          resolve: resolve,\n          reject: reject,\n          next: null\n        };\n\n        if (back) {\n          back = back.next = request;\n        } else {\n          front = back = request;\n          resume(key, arg);\n        }\n      });\n    }\n\n    function resume(key, arg) {\n      try {\n        var result = gen[key](arg);\n        var value = result.value;\n\n        if (value instanceof AwaitValue) {\n          Promise.resolve(value.value).then(function (arg) {\n            resume(\"next\", arg);\n          }, function (arg) {\n            resume(\"throw\", arg);\n          });\n        } else {\n          settle(result.done ? \"return\" : \"normal\", result.value);\n        }\n      } catch (err) {\n        settle(\"throw\", err);\n      }\n    }\n\n    function settle(type, value) {\n      switch (type) {\n        case \"return\":\n          front.resolve({\n            value: value,\n            done: true\n          });\n          break;\n\n        case \"throw\":\n          front.reject(value);\n          break;\n\n        default:\n          front.resolve({\n            value: value,\n            done: false\n          });\n          break;\n      }\n\n      front = front.next;\n\n      if (front) {\n        resume(front.key, front.arg);\n      } else {\n        back = null;\n      }\n    }\n\n    this._invoke = send;\n\n    if (typeof gen.return !== \"function\") {\n      this.return = undefined;\n    }\n  }\n\n  if (typeof Symbol === \"function\" && Symbol.asyncIterator) {\n    AsyncGenerator.prototype[Symbol.asyncIterator] = function () {\n      return this;\n    };\n  }\n\n  AsyncGenerator.prototype.next = function (arg) {\n    return this._invoke(\"next\", arg);\n  };\n\n  AsyncGenerator.prototype.throw = function (arg) {\n    return this._invoke(\"throw\", arg);\n  };\n\n  AsyncGenerator.prototype.return = function (arg) {\n    return this._invoke(\"return\", arg);\n  };\n\n  return {\n    wrap: function (fn) {\n      return function () {\n        return new AsyncGenerator(fn.apply(this, arguments));\n      };\n    },\n    await: function (value) {\n      return new AwaitValue(value);\n    }\n  };\n}();\n\n\n\n\n\nvar classCallCheck = function (instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n};\n\n/** @license MIT License (c) copyright 2010-2017 original author or authors */\n\nvar ScheduledTask = /*#__PURE__*/function () {\n  function ScheduledTask(time, localOffset, period, task, scheduler) {\n    classCallCheck(this, ScheduledTask);\n\n    this.time = time;\n    this.localOffset = localOffset;\n    this.period = period;\n    this.task = task;\n    this.scheduler = scheduler;\n    this.active = true;\n  }\n\n  ScheduledTask.prototype.run = function run() {\n    return this.task.run(this.time - this.localOffset);\n  };\n\n  ScheduledTask.prototype.error = function error(e) {\n    return this.task.error(this.time - this.localOffset, e);\n  };\n\n  ScheduledTask.prototype.dispose = function dispose() {\n    this.scheduler.cancel(this);\n    return this.task.dispose();\n  };\n\n  return ScheduledTask;\n}();\n\nvar RelativeScheduler = /*#__PURE__*/function () {\n  function RelativeScheduler(origin, scheduler) {\n    classCallCheck(this, RelativeScheduler);\n\n    this.origin = origin;\n    this.scheduler = scheduler;\n  }\n\n  RelativeScheduler.prototype.currentTime = function currentTime() {\n    return this.scheduler.currentTime() - this.origin;\n  };\n\n  RelativeScheduler.prototype.scheduleTask = function scheduleTask(localOffset, delay, period, task) {\n    return this.scheduler.scheduleTask(localOffset + this.origin, delay, period, task);\n  };\n\n  RelativeScheduler.prototype.relative = function relative(origin) {\n    return new RelativeScheduler(origin + this.origin, this.scheduler);\n  };\n\n  RelativeScheduler.prototype.cancel = function cancel(task) {\n    return this.scheduler.cancel(task);\n  };\n\n  RelativeScheduler.prototype.cancelAll = function cancelAll(f) {\n    return this.scheduler.cancelAll(f);\n  };\n\n  return RelativeScheduler;\n}();\n\n/** @license MIT License (c) copyright 2010-2017 original author or authors */\n\nvar defer = function defer(task) {\n  return Promise.resolve(task).then(runTask);\n};\n\nfunction runTask(task) {\n  try {\n    return task.run();\n  } catch (e) {\n    return task.error(e);\n  }\n}\n\n/** @license MIT License (c) copyright 2010-2017 original author or authors */\n\nvar Scheduler = /*#__PURE__*/function () {\n  function Scheduler(timer, timeline) {\n    var _this = this;\n\n    classCallCheck(this, Scheduler);\n\n    this.timer = timer;\n    this.timeline = timeline;\n\n    this._timer = null;\n    this._nextArrival = Infinity;\n\n    this._runReadyTasksBound = function () {\n      return _this._runReadyTasks(_this.currentTime());\n    };\n  }\n\n  Scheduler.prototype.currentTime = function currentTime() {\n    return this.timer.now();\n  };\n\n  Scheduler.prototype.scheduleTask = function scheduleTask(localOffset, delay, period, task) {\n    var time = this.currentTime() + Math.max(0, delay);\n    var st = new ScheduledTask(time, localOffset, period, task, this);\n\n    this.timeline.add(st);\n    this._scheduleNextRun();\n    return st;\n  };\n\n  Scheduler.prototype.relative = function relative(offset) {\n    return new RelativeScheduler(offset, this);\n  };\n\n  Scheduler.prototype.cancel = function cancel(task) {\n    task.active = false;\n    if (this.timeline.remove(task)) {\n      this._reschedule();\n    }\n  };\n\n  Scheduler.prototype.cancelAll = function cancelAll(f) {\n    this.timeline.removeAll(f);\n    this._reschedule();\n  };\n\n  Scheduler.prototype._reschedule = function _reschedule() {\n    if (this.timeline.isEmpty()) {\n      this._unschedule();\n    } else {\n      this._scheduleNextRun(this.currentTime());\n    }\n  };\n\n  Scheduler.prototype._unschedule = function _unschedule() {\n    this.timer.clearTimer(this._timer);\n    this._timer = null;\n  };\n\n  Scheduler.prototype._scheduleNextRun = function _scheduleNextRun() {\n    // eslint-disable-line complexity\n    if (this.timeline.isEmpty()) {\n      return;\n    }\n\n    var nextArrival = this.timeline.nextArrival();\n\n    if (this._timer === null) {\n      this._scheduleNextArrival(nextArrival);\n    } else if (nextArrival < this._nextArrival) {\n      this._unschedule();\n      this._scheduleNextArrival(nextArrival);\n    }\n  };\n\n  Scheduler.prototype._scheduleNextArrival = function _scheduleNextArrival(nextArrival) {\n    this._nextArrival = nextArrival;\n    var delay = Math.max(0, nextArrival - this.currentTime());\n    this._timer = this.timer.setTimer(this._runReadyTasksBound, delay);\n  };\n\n  Scheduler.prototype._runReadyTasks = function _runReadyTasks() {\n    this._timer = null;\n    this.timeline.runTasks(this.currentTime(), runTask);\n    this._scheduleNextRun();\n  };\n\n  return Scheduler;\n}();\n\n/** @license MIT License (c) copyright 2010-2017 original author or authors */\n\nvar Timeline = /*#__PURE__*/function () {\n  function Timeline() {\n    classCallCheck(this, Timeline);\n\n    this.tasks = [];\n  }\n\n  Timeline.prototype.nextArrival = function nextArrival() {\n    return this.isEmpty() ? Infinity : this.tasks[0].time;\n  };\n\n  Timeline.prototype.isEmpty = function isEmpty() {\n    return this.tasks.length === 0;\n  };\n\n  Timeline.prototype.add = function add(st) {\n    insertByTime(st, this.tasks);\n  };\n\n  Timeline.prototype.remove = function remove(st) {\n    var i = binarySearch(getTime(st), this.tasks);\n\n    if (i >= 0 && i < this.tasks.length) {\n      var at = findIndex(st, this.tasks[i].events);\n      if (at >= 0) {\n        this.tasks[i].events.splice(at, 1);\n        return true;\n      }\n    }\n\n    return false;\n  };\n\n  Timeline.prototype.removeAll = function removeAll$$1(f) {\n    for (var i = 0; i < this.tasks.length; ++i) {\n      removeAllFrom(f, this.tasks[i]);\n    }\n  };\n\n  Timeline.prototype.runTasks = function runTasks(t, runTask) {\n    var tasks = this.tasks;\n    var l = tasks.length;\n    var i = 0;\n\n    while (i < l && tasks[i].time <= t) {\n      ++i;\n    }\n\n    this.tasks = tasks.slice(i);\n\n    // Run all ready tasks\n    for (var j = 0; j < i; ++j) {\n      this.tasks = runReadyTasks(runTask, tasks[j].events, this.tasks);\n    }\n  };\n\n  return Timeline;\n}();\n\nfunction runReadyTasks(runTask, events, tasks) {\n  // eslint-disable-line complexity\n  for (var i = 0; i < events.length; ++i) {\n    var task = events[i];\n\n    if (task.active) {\n      runTask(task);\n\n      // Reschedule periodic repeating tasks\n      // Check active again, since a task may have canceled itself\n      if (task.period >= 0 && task.active) {\n        task.time = task.time + task.period;\n        insertByTime(task, tasks);\n      }\n    }\n  }\n\n  return tasks;\n}\n\nfunction insertByTime(task, timeslots) {\n  var l = timeslots.length;\n  var time = getTime(task);\n\n  if (l === 0) {\n    timeslots.push(newTimeslot(time, [task]));\n    return;\n  }\n\n  var i = binarySearch(time, timeslots);\n\n  if (i >= l) {\n    timeslots.push(newTimeslot(time, [task]));\n  } else {\n    insertAtTimeslot(task, timeslots, time, i);\n  }\n}\n\nfunction insertAtTimeslot(task, timeslots, time, i) {\n  var timeslot = timeslots[i];\n  if (time === timeslot.time) {\n    addEvent(task, timeslot.events, time);\n  } else {\n    timeslots.splice(i, 0, newTimeslot(time, [task]));\n  }\n}\n\nfunction addEvent(task, events) {\n  if (events.length === 0 || task.time >= events[events.length - 1].time) {\n    events.push(task);\n  } else {\n    spliceEvent(task, events);\n  }\n}\n\nfunction spliceEvent(task, events) {\n  for (var j = 0; j < events.length; j++) {\n    if (task.time < events[j].time) {\n      events.splice(j, 0, task);\n      break;\n    }\n  }\n}\n\nfunction getTime(scheduledTask) {\n  return Math.floor(scheduledTask.time);\n}\n\nfunction removeAllFrom(f, timeslot) {\n  timeslot.events = removeAll(f, timeslot.events);\n}\n\nfunction binarySearch(t, sortedArray) {\n  // eslint-disable-line complexity\n  var lo = 0;\n  var hi = sortedArray.length;\n  var mid = void 0,\n      y = void 0;\n\n  while (lo < hi) {\n    mid = Math.floor((lo + hi) / 2);\n    y = sortedArray[mid];\n\n    if (t === y.time) {\n      return mid;\n    } else if (t < y.time) {\n      hi = mid;\n    } else {\n      lo = mid + 1;\n    }\n  }\n  return hi;\n}\n\nvar newTimeslot = function newTimeslot(t, events) {\n  return { time: t, events: events };\n};\n\n/** @license MIT License (c) copyright 2010-2017 original author or authors */\n\n/* global setTimeout, clearTimeout */\n\nvar ClockTimer = /*#__PURE__*/function () {\n  function ClockTimer(clock) {\n    classCallCheck(this, ClockTimer);\n\n    this._clock = clock;\n  }\n\n  ClockTimer.prototype.now = function now() {\n    return this._clock.now();\n  };\n\n  ClockTimer.prototype.setTimer = function setTimer(f, dt) {\n    return dt <= 0 ? runAsap(f) : setTimeout(f, dt);\n  };\n\n  ClockTimer.prototype.clearTimer = function clearTimer(t) {\n    return t instanceof Asap ? t.cancel() : clearTimeout(t);\n  };\n\n  return ClockTimer;\n}();\n\nvar Asap = /*#__PURE__*/function () {\n  function Asap(f) {\n    classCallCheck(this, Asap);\n\n    this.f = f;\n    this.active = true;\n  }\n\n  Asap.prototype.run = function run() {\n    return this.active && this.f();\n  };\n\n  Asap.prototype.error = function error(e) {\n    throw e;\n  };\n\n  Asap.prototype.cancel = function cancel() {\n    this.active = false;\n  };\n\n  return Asap;\n}();\n\nfunction runAsap(f) {\n  var task = new Asap(f);\n  defer(task);\n  return task;\n}\n\n/** @license MIT License (c) copyright 2010-2017 original author or authors */\n\n/* global performance, process */\n\nvar RelativeClock = /*#__PURE__*/function () {\n  function RelativeClock(clock, origin) {\n    classCallCheck(this, RelativeClock);\n\n    this.origin = origin;\n    this.clock = clock;\n  }\n\n  RelativeClock.prototype.now = function now() {\n    return this.clock.now() - this.origin;\n  };\n\n  return RelativeClock;\n}();\n\nvar HRTimeClock = /*#__PURE__*/function () {\n  function HRTimeClock(hrtime, origin) {\n    classCallCheck(this, HRTimeClock);\n\n    this.origin = origin;\n    this.hrtime = hrtime;\n  }\n\n  HRTimeClock.prototype.now = function now() {\n    var hrt = this.hrtime(this.origin);\n    return (hrt[0] * 1e9 + hrt[1]) / 1e6;\n  };\n\n  return HRTimeClock;\n}();\n\nvar clockRelativeTo = function clockRelativeTo(clock) {\n  return new RelativeClock(clock, clock.now());\n};\n\nvar newPerformanceClock = function newPerformanceClock() {\n  return clockRelativeTo(performance);\n};\n\nvar newDateClock = function newDateClock() {\n  return clockRelativeTo(Date);\n};\n\nvar newHRTimeClock = function newHRTimeClock() {\n  return new HRTimeClock(process.hrtime, process.hrtime());\n};\n\nvar newPlatformClock = function newPlatformClock() {\n  if (typeof performance !== 'undefined' && typeof performance.now === 'function') {\n    return newPerformanceClock();\n  } else if (typeof process !== 'undefined' && typeof process.hrtime === 'function') {\n    return newHRTimeClock();\n  }\n\n  return newDateClock();\n};\n\n// Read the current time from the provided Scheduler\nvar currentTime = function currentTime(scheduler) {\n  return scheduler.currentTime();\n};\n\n// Schedule a task to run as soon as possible, but\n// not in the current call stack\nvar asap = /*#__PURE__*/curry2(function (task, scheduler) {\n  return scheduler.scheduleTask(0, 0, -1, task);\n});\n\n// Schedule a task to run after a millisecond delay\nvar delay = /*#__PURE__*/curry3(function (delay, task, scheduler) {\n  return scheduler.scheduleTask(0, delay, -1, task);\n});\n\n// Schedule a task to run periodically, with the\n// first run starting asap\nvar periodic = /*#__PURE__*/curry3(function (period, task, scheduler) {\n  return scheduler.scheduleTask(0, 0, period, task);\n});\n\n// Cancel a scheduledTask\nvar cancelTask = function cancelTask(scheduledTask) {\n  return scheduledTask.dispose();\n};\n\n// Cancel all ScheduledTasks for which a predicate\n// is true\nvar cancelAllTasks = /*#__PURE__*/curry2(function (predicate, scheduler) {\n  return scheduler.cancelAll(predicate);\n});\n\nvar schedulerRelativeTo = /*#__PURE__*/curry2(function (offset, scheduler) {\n  return new RelativeScheduler(offset, scheduler);\n});\n\n/** @license MIT License (c) copyright 2010-2017 original author or authors */\n\nvar newScheduler = /*#__PURE__*/curry2(function (timer, timeline) {\n  return new Scheduler(timer, timeline);\n});\n\nvar newDefaultScheduler = function newDefaultScheduler() {\n  return new Scheduler(newDefaultTimer(), new Timeline());\n};\n\nvar newDefaultTimer = function newDefaultTimer() {\n  return new ClockTimer(newPlatformClock());\n};\nvar newClockTimer = function newClockTimer(clock) {\n  return new ClockTimer(clock);\n};\n\nvar newTimeline = function newTimeline() {\n  return new Timeline();\n};\n\nexport { newScheduler, newDefaultScheduler, newDefaultTimer, newClockTimer, newTimeline, RelativeClock, HRTimeClock, clockRelativeTo, newPerformanceClock, newDateClock, newHRTimeClock, newPlatformClock, currentTime, asap, delay, periodic, cancelTask, cancelAllTasks, schedulerRelativeTo };\n//# sourceMappingURL=index.es.js.map\n","import { append, curry2, curry3, reduce } from '@most/prelude';\n\n/** @license MIT License (c) copyright 2010-2017 original author or authors */\n\nvar dispose = function dispose(disposable) {\n  return disposable.dispose();\n};\n\nvar asyncGenerator = function () {\n  function AwaitValue(value) {\n    this.value = value;\n  }\n\n  function AsyncGenerator(gen) {\n    var front, back;\n\n    function send(key, arg) {\n      return new Promise(function (resolve, reject) {\n        var request = {\n          key: key,\n          arg: arg,\n          resolve: resolve,\n          reject: reject,\n          next: null\n        };\n\n        if (back) {\n          back = back.next = request;\n        } else {\n          front = back = request;\n          resume(key, arg);\n        }\n      });\n    }\n\n    function resume(key, arg) {\n      try {\n        var result = gen[key](arg);\n        var value = result.value;\n\n        if (value instanceof AwaitValue) {\n          Promise.resolve(value.value).then(function (arg) {\n            resume(\"next\", arg);\n          }, function (arg) {\n            resume(\"throw\", arg);\n          });\n        } else {\n          settle(result.done ? \"return\" : \"normal\", result.value);\n        }\n      } catch (err) {\n        settle(\"throw\", err);\n      }\n    }\n\n    function settle(type, value) {\n      switch (type) {\n        case \"return\":\n          front.resolve({\n            value: value,\n            done: true\n          });\n          break;\n\n        case \"throw\":\n          front.reject(value);\n          break;\n\n        default:\n          front.resolve({\n            value: value,\n            done: false\n          });\n          break;\n      }\n\n      front = front.next;\n\n      if (front) {\n        resume(front.key, front.arg);\n      } else {\n        back = null;\n      }\n    }\n\n    this._invoke = send;\n\n    if (typeof gen.return !== \"function\") {\n      this.return = undefined;\n    }\n  }\n\n  if (typeof Symbol === \"function\" && Symbol.asyncIterator) {\n    AsyncGenerator.prototype[Symbol.asyncIterator] = function () {\n      return this;\n    };\n  }\n\n  AsyncGenerator.prototype.next = function (arg) {\n    return this._invoke(\"next\", arg);\n  };\n\n  AsyncGenerator.prototype.throw = function (arg) {\n    return this._invoke(\"throw\", arg);\n  };\n\n  AsyncGenerator.prototype.return = function (arg) {\n    return this._invoke(\"return\", arg);\n  };\n\n  return {\n    wrap: function (fn) {\n      return function () {\n        return new AsyncGenerator(fn.apply(this, arguments));\n      };\n    },\n    await: function (value) {\n      return new AwaitValue(value);\n    }\n  };\n}();\n\n\n\n\n\nvar classCallCheck = function (instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n};\n\n/** @license MIT License (c) copyright 2010-2017 original author or authors */\n\nvar disposeNone = function disposeNone() {\n  return NONE;\n};\nvar NONE = /*#__PURE__*/new (function () {\n  function DisposeNone() {\n    classCallCheck(this, DisposeNone);\n  }\n\n  DisposeNone.prototype.dispose = function dispose() {};\n\n  return DisposeNone;\n}())();\n\nvar isDisposeNone = function isDisposeNone(d) {\n  return d === NONE;\n};\n\n/** @license MIT License (c) copyright 2010-2017 original author or authors */\n\n// Wrap an existing disposable (which may not already have been once()d)\n// so that it will only dispose its underlying resource at most once.\nvar disposeOnce = function disposeOnce(disposable) {\n  return new DisposeOnce(disposable);\n};\n\nvar DisposeOnce = /*#__PURE__*/function () {\n  function DisposeOnce(disposable) {\n    classCallCheck(this, DisposeOnce);\n\n    this.disposed = false;\n    this.disposable = disposable;\n  }\n\n  DisposeOnce.prototype.dispose = function dispose() {\n    if (!this.disposed) {\n      this.disposed = true;\n      this.disposable.dispose();\n      this.disposable = undefined;\n    }\n  };\n\n  return DisposeOnce;\n}();\n\n/** @license MIT License (c) copyright 2010-2017 original author or authors */\n// Create a Disposable that will use the provided\n// dispose function to dispose the resource\nvar disposeWith = /*#__PURE__*/curry2(function (dispose, resource) {\n  return disposeOnce(new DisposeWith(dispose, resource));\n});\n\n// Disposable represents a resource that must be\n// disposed/released. It aggregates a function to dispose\n// the resource and a handle to a key/id/handle/reference\n// that identifies the resource\n\nvar DisposeWith = /*#__PURE__*/function () {\n  function DisposeWith(dispose, resource) {\n    classCallCheck(this, DisposeWith);\n\n    this._dispose = dispose;\n    this._resource = resource;\n  }\n\n  DisposeWith.prototype.dispose = function dispose() {\n    this._dispose(this._resource);\n  };\n\n  return DisposeWith;\n}();\n\n/** @license MIT License (c) copyright 2010 original author or authors */\n// Aggregate a list of disposables into a DisposeAll\nvar disposeAll = function disposeAll(ds) {\n  var merged = reduce(merge, [], ds);\n  return merged.length === 0 ? disposeNone() : new DisposeAll(merged);\n};\n\n// Convenience to aggregate 2 disposables\nvar disposeBoth = /*#__PURE__*/curry2(function (d1, d2) {\n  return disposeAll([d1, d2]);\n});\n\nvar merge = function merge(ds, d) {\n  return isDisposeNone(d) ? ds : d instanceof DisposeAll ? ds.concat(d.disposables) : append(d, ds);\n};\n\nvar DisposeAll = /*#__PURE__*/function () {\n  function DisposeAll(disposables) {\n    classCallCheck(this, DisposeAll);\n\n    this.disposables = disposables;\n  }\n\n  DisposeAll.prototype.dispose = function dispose() {\n    throwIfErrors(disposeCollectErrors(this.disposables));\n  };\n\n  return DisposeAll;\n}();\n\n// Dispose all, safely collecting errors into an array\n\n\nvar disposeCollectErrors = function disposeCollectErrors(disposables) {\n  return reduce(appendIfError, [], disposables);\n};\n\n// Call dispose and if throws, append thrown error to errors\nvar appendIfError = function appendIfError(errors, d) {\n  try {\n    d.dispose();\n  } catch (e) {\n    errors.push(e);\n  }\n  return errors;\n};\n\n// Throw DisposeAllError if errors is non-empty\nvar throwIfErrors = function throwIfErrors(errors) {\n  if (errors.length > 0) {\n    throw new DisposeAllError(errors.length + ' errors', errors);\n  }\n};\n\nvar DisposeAllError = /*#__PURE__*/function (Error) {\n  function DisposeAllError(message, errors) {\n    Error.call(this, message);\n    this.message = message;\n    this.name = DisposeAllError.name;\n    this.errors = errors;\n\n    if (Error.captureStackTrace) {\n      Error.captureStackTrace(this, DisposeAllError);\n    }\n\n    this.stack = '' + this.stack + formatErrorStacks(this.errors);\n  }\n\n  DisposeAllError.prototype = /*#__PURE__*/Object.create(Error.prototype);\n\n  return DisposeAllError;\n}(Error);\n\nvar formatErrorStacks = function formatErrorStacks(errors) {\n  return reduce(formatErrorStack, '', errors);\n};\n\nvar formatErrorStack = function formatErrorStack(s, e, i) {\n  return s + ('\\n[' + (i + 1) + '] ' + e.stack);\n};\n\n/** @license MIT License (c) copyright 2010-2017 original author or authors */\n// Try to dispose the disposable.  If it throws, send\n// the error to sink.error with the provided Time value\nvar tryDispose = /*#__PURE__*/curry3(function (t, disposable, sink) {\n  try {\n    disposable.dispose();\n  } catch (e) {\n    sink.error(t, e);\n  }\n});\n\n/** @license MIT License (c) copyright 2010-2017 original author or authors */\n\nexport { dispose, disposeNone, isDisposeNone, disposeWith, disposeOnce, disposeAll, disposeBoth, DisposeAllError, tryDispose };\n//# sourceMappingURL=index.es.js.map\n","import { append, apply, compose, curry2, curry3, findIndex, id, map, reduce, remove } from '@most/prelude';\nimport { asap, cancelAllTasks, currentTime, delay, periodic, schedulerRelativeTo } from '@most/scheduler';\nimport { disposeAll, disposeBoth, disposeNone, disposeOnce, tryDispose } from '@most/disposable';\n\n/** @license MIT License (c) copyright 2010-2016 original author or authors */\n/** @author Brian Cavalier */\n/** @author John Hann */\n\nfunction fatalError(e) {\n  setTimeout(rethrow, 0, e);\n}\n\nfunction rethrow(e) {\n  throw e;\n}\n\nvar asyncGenerator = function () {\n  function AwaitValue(value) {\n    this.value = value;\n  }\n\n  function AsyncGenerator(gen) {\n    var front, back;\n\n    function send(key, arg) {\n      return new Promise(function (resolve, reject) {\n        var request = {\n          key: key,\n          arg: arg,\n          resolve: resolve,\n          reject: reject,\n          next: null\n        };\n\n        if (back) {\n          back = back.next = request;\n        } else {\n          front = back = request;\n          resume(key, arg);\n        }\n      });\n    }\n\n    function resume(key, arg) {\n      try {\n        var result = gen[key](arg);\n        var value = result.value;\n\n        if (value instanceof AwaitValue) {\n          Promise.resolve(value.value).then(function (arg) {\n            resume(\"next\", arg);\n          }, function (arg) {\n            resume(\"throw\", arg);\n          });\n        } else {\n          settle(result.done ? \"return\" : \"normal\", result.value);\n        }\n      } catch (err) {\n        settle(\"throw\", err);\n      }\n    }\n\n    function settle(type, value) {\n      switch (type) {\n        case \"return\":\n          front.resolve({\n            value: value,\n            done: true\n          });\n          break;\n\n        case \"throw\":\n          front.reject(value);\n          break;\n\n        default:\n          front.resolve({\n            value: value,\n            done: false\n          });\n          break;\n      }\n\n      front = front.next;\n\n      if (front) {\n        resume(front.key, front.arg);\n      } else {\n        back = null;\n      }\n    }\n\n    this._invoke = send;\n\n    if (typeof gen.return !== \"function\") {\n      this.return = undefined;\n    }\n  }\n\n  if (typeof Symbol === \"function\" && Symbol.asyncIterator) {\n    AsyncGenerator.prototype[Symbol.asyncIterator] = function () {\n      return this;\n    };\n  }\n\n  AsyncGenerator.prototype.next = function (arg) {\n    return this._invoke(\"next\", arg);\n  };\n\n  AsyncGenerator.prototype.throw = function (arg) {\n    return this._invoke(\"throw\", arg);\n  };\n\n  AsyncGenerator.prototype.return = function (arg) {\n    return this._invoke(\"return\", arg);\n  };\n\n  return {\n    wrap: function (fn) {\n      return function () {\n        return new AsyncGenerator(fn.apply(this, arguments));\n      };\n    },\n    await: function (value) {\n      return new AwaitValue(value);\n    }\n  };\n}();\n\n\n\n\n\nvar classCallCheck = function (instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n};\n\n\n\n\n\n\n\n\n\n\n\nvar inherits = function (subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n};\n\n\n\n\n\n\n\n\n\n\n\nvar possibleConstructorReturn = function (self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n};\n\n/** @license MIT License (c) copyright 2010-2016 original author or authors */\n/** @author Brian Cavalier */\n/** @author John Hann */\n\nvar propagateTask$1 = function propagateTask(run, value, sink) {\n  return new PropagateTask(run, value, sink);\n};\n\nvar propagateEventTask$1 = function propagateEventTask(value, sink) {\n  return propagateTask$1(runEvent, value, sink);\n};\n\nvar propagateEndTask = function propagateEndTask(sink) {\n  return propagateTask$1(runEnd, undefined, sink);\n};\n\nvar propagateErrorTask$1 = function propagateErrorTask(value, sink) {\n  return propagateTask$1(runError, value, sink);\n};\n\nvar PropagateTask = /*#__PURE__*/function () {\n  function PropagateTask(run, value, sink) {\n    classCallCheck(this, PropagateTask);\n\n    this._run = run;\n    this.value = value;\n    this.sink = sink;\n    this.active = true;\n  }\n\n  PropagateTask.prototype.dispose = function dispose() {\n    this.active = false;\n  };\n\n  PropagateTask.prototype.run = function run(t) {\n    if (!this.active) {\n      return;\n    }\n    var run = this._run;\n    run(t, this.value, this.sink);\n  };\n\n  PropagateTask.prototype.error = function error(t, e) {\n    // TODO: Remove this check and just do this.sink.error(t, e)?\n    if (!this.active) {\n      return fatalError(e);\n    }\n    this.sink.error(t, e);\n  };\n\n  return PropagateTask;\n}();\n\nvar runEvent = function runEvent(t, x, sink) {\n  return sink.event(t, x);\n};\n\nvar runEnd = function runEnd(t, _, sink) {\n  return sink.end(t);\n};\n\nvar runError = function runError(t, e, sink) {\n  return sink.error(t, e);\n};\n\n/** @license MIT License (c) copyright 2010-2017 original author or authors */\n\nvar empty = function empty() {\n  return EMPTY;\n};\n\nvar isCanonicalEmpty = function isCanonicalEmpty(stream) {\n  return stream === EMPTY;\n};\n\nvar containsCanonicalEmpty = function containsCanonicalEmpty(streams) {\n  return streams.some(isCanonicalEmpty);\n};\n\nvar Empty = /*#__PURE__*/function () {\n  function Empty() {\n    classCallCheck(this, Empty);\n  }\n\n  Empty.prototype.run = function run(sink, scheduler$$1) {\n    return asap(propagateEndTask(sink), scheduler$$1);\n  };\n\n  return Empty;\n}();\n\nvar EMPTY = /*#__PURE__*/new Empty();\n\n/** @license MIT License (c) copyright 2010-2017 original author or authors */\n\nvar never = function never() {\n  return NEVER;\n};\n\nvar Never = /*#__PURE__*/function () {\n  function Never() {\n    classCallCheck(this, Never);\n  }\n\n  Never.prototype.run = function run() {\n    return disposeNone();\n  };\n\n  return Never;\n}();\n\nvar NEVER = /*#__PURE__*/new Never();\n\n/** @license MIT License (c) copyright 2010-2017 original author or authors */\n\nvar at = function at(t, x) {\n  return new At(t, x);\n};\n\nvar At = /*#__PURE__*/function () {\n  function At(t, x) {\n    classCallCheck(this, At);\n\n    this.time = t;\n    this.value = x;\n  }\n\n  At.prototype.run = function run(sink, scheduler$$1) {\n    return delay(this.time, propagateTask$1(runAt, this.value, sink), scheduler$$1);\n  };\n\n  return At;\n}();\n\nfunction runAt(t, x, sink) {\n  sink.event(t, x);\n  sink.end(t);\n}\n\n/** @license MIT License (c) copyright 2010-2017 original author or authors */\n\nvar now = function now(x) {\n  return at(0, x);\n};\n\n/** @license MIT License (c) copyright 2010-2016 original author or authors */\n/** @author Brian Cavalier */\n/** @author John Hann */\n\n/**\n * Create a stream of events that occur at a regular period\n * @param {Number} period periodicity of events\n * @returns {Stream} new stream of periodic events, the event value is undefined\n */\nvar periodic$1 = function periodic$$1(period) {\n  return new Periodic(period);\n};\n\nvar Periodic = /*#__PURE__*/function () {\n  function Periodic(period) {\n    classCallCheck(this, Periodic);\n\n    this.period = period;\n  }\n\n  Periodic.prototype.run = function run(sink, scheduler$$1) {\n    return periodic(this.period, propagateEventTask$1(undefined, sink), scheduler$$1);\n  };\n\n  return Periodic;\n}();\n\n/** @license MIT License (c) copyright 2010-2017 original author or authors */\n\nvar newStream = function newStream(run) {\n  return new Stream(run);\n};\n\nvar Stream = function Stream(run) {\n  classCallCheck(this, Stream);\n\n  this.run = run;\n};\n\n/** @license MIT License (c) copyright 2010-2017 original author or authors */\n/** @author Brian Cavalier */\n\nvar Pipe = /*#__PURE__*/function () {\n  function Pipe(sink) {\n    classCallCheck(this, Pipe);\n\n    this.sink = sink;\n  }\n\n  Pipe.prototype.event = function event(t, x) {\n    return this.sink.event(t, x);\n  };\n\n  Pipe.prototype.end = function end(t) {\n    return this.sink.end(t);\n  };\n\n  Pipe.prototype.error = function error(t, e) {\n    return this.sink.error(t, e);\n  };\n\n  return Pipe;\n}();\n\n/** @license MIT License (c) copyright 2010 original author or authors */\n\n// A slice Bounds type that narrows min values via accumulation\n// and max values via Math.min.\n// type Bounds = { min: number, max: number }\n// Notes:\n// 0 <= min <= max\n// slice(min2, max2, slice(min1, max1, s)) ~ slice(min1 + min2, Math.min(max1, min1 + max2), s)\n// A bounds has a 1d coord system with origin 0, extending to Infinity.  Both min and max\n// are relative to the origin (0).  However, when merging bounds b1 and b2, we\n// *interpret* b2 as being relative to b1, hence adding min1 to *both* min2 and max2.\n// This essentially translates b2's coordinates back into origin coordinates\n// as bounds are merged.\n\n// Construct a constrained bounds\nvar boundsFrom = function boundsFrom(unsafeMin, unsafeMax) {\n  var min = Math.max(0, unsafeMin);\n  var max = Math.max(min, unsafeMax);\n  return { min: min, max: max };\n};\n\nvar minBounds = function minBounds(min) {\n  return boundsFrom(min, Infinity);\n};\n\nvar maxBounds = function maxBounds(max) {\n  return boundsFrom(0, max);\n};\n\n// Combine 2 bounds by narrowing min and max\nvar mergeBounds = function mergeBounds(b1, b2) {\n  return boundsFrom(b1.min + b2.min, Math.min(b1.max, b1.min + b2.max));\n};\n\n// Nil bounds excludes all slice indices\nvar isNilBounds = function isNilBounds(b) {\n  return b.min >= b.max;\n};\n\n// Infinite bounds includes all slice indices\nvar isInfiniteBounds = function isInfiniteBounds(b) {\n  return b.min <= 0 && b.max === Infinity;\n};\n\n/** @license MIT License (c) copyright 2010-2016 original author or authors */\n/** @author Brian Cavalier */\n/** @author John Hann */\n\nvar Filter = /*#__PURE__*/function () {\n  function Filter(p, source) {\n    classCallCheck(this, Filter);\n\n    this.p = p;\n    this.source = source;\n  }\n\n  Filter.prototype.run = function run(sink, scheduler$$1) {\n    return this.source.run(new FilterSink(this.p, sink), scheduler$$1);\n  };\n\n  /**\n   * Create a filtered source, fusing adjacent filter.filter if possible\n   * @param {function(x:*):boolean} p filtering predicate\n   * @param {{run:function}} source source to filter\n   * @returns {Filter} filtered source\n   */\n\n\n  Filter.create = function create(p, source) {\n    if (isCanonicalEmpty(source)) {\n      return source;\n    }\n\n    if (source instanceof Filter) {\n      return new Filter(and(source.p, p), source.source);\n    }\n\n    return new Filter(p, source);\n  };\n\n  return Filter;\n}();\n\nvar FilterSink = /*#__PURE__*/function (_Pipe) {\n  inherits(FilterSink, _Pipe);\n\n  function FilterSink(p, sink) {\n    classCallCheck(this, FilterSink);\n\n    var _this = possibleConstructorReturn(this, _Pipe.call(this, sink));\n\n    _this.p = p;\n    return _this;\n  }\n\n  FilterSink.prototype.event = function event(t, x) {\n    var p = this.p;\n    p(x) && this.sink.event(t, x);\n  };\n\n  return FilterSink;\n}(Pipe);\n\nvar and = function and(p, q) {\n  return function (x) {\n    return p(x) && q(x);\n  };\n};\n\n/** @license MIT License (c) copyright 2010-2016 original author or authors */\n/** @author Brian Cavalier */\n/** @author John Hann */\n\nvar FilterMap = /*#__PURE__*/function () {\n  function FilterMap(p, f, source) {\n    classCallCheck(this, FilterMap);\n\n    this.p = p;\n    this.f = f;\n    this.source = source;\n  }\n\n  FilterMap.prototype.run = function run(sink, scheduler$$1) {\n    return this.source.run(new FilterMapSink(this.p, this.f, sink), scheduler$$1);\n  };\n\n  return FilterMap;\n}();\n\nvar FilterMapSink = /*#__PURE__*/function (_Pipe) {\n  inherits(FilterMapSink, _Pipe);\n\n  function FilterMapSink(p, f, sink) {\n    classCallCheck(this, FilterMapSink);\n\n    var _this = possibleConstructorReturn(this, _Pipe.call(this, sink));\n\n    _this.p = p;\n    _this.f = f;\n    return _this;\n  }\n\n  FilterMapSink.prototype.event = function event(t, x) {\n    var f = this.f;\n    var p = this.p;\n    p(x) && this.sink.event(t, f(x));\n  };\n\n  return FilterMapSink;\n}(Pipe);\n\n/** @license MIT License (c) copyright 2010-2016 original author or authors */\n/** @author Brian Cavalier */\n/** @author John Hann */\n\nvar Map = /*#__PURE__*/function () {\n  function Map(f, source) {\n    classCallCheck(this, Map);\n\n    this.f = f;\n    this.source = source;\n  }\n\n  Map.prototype.run = function run(sink, scheduler$$1) {\n    // eslint-disable-line no-extend-native\n    return this.source.run(new MapSink(this.f, sink), scheduler$$1);\n  };\n\n  /**\n   * Create a mapped source, fusing adjacent map.map, filter.map,\n   * and filter.map.map if possible\n   * @param {function(*):*} f mapping function\n   * @param {{run:function}} source source to map\n   * @returns {Map|FilterMap} mapped source, possibly fused\n   */\n\n\n  Map.create = function create(f, source) {\n    if (isCanonicalEmpty(source)) {\n      return empty();\n    }\n\n    if (source instanceof Map) {\n      return new Map(compose(f, source.f), source.source);\n    }\n\n    if (source instanceof Filter) {\n      return new FilterMap(source.p, f, source.source);\n    }\n\n    return new Map(f, source);\n  };\n\n  return Map;\n}();\n\nvar MapSink = /*#__PURE__*/function (_Pipe) {\n  inherits(MapSink, _Pipe);\n\n  function MapSink(f, sink) {\n    classCallCheck(this, MapSink);\n\n    var _this = possibleConstructorReturn(this, _Pipe.call(this, sink));\n\n    _this.f = f;\n    return _this;\n  }\n\n  MapSink.prototype.event = function event(t, x) {\n    var f = this.f;\n    this.sink.event(t, f(x));\n  };\n\n  return MapSink;\n}(Pipe);\n\n/** @license MIT License (c) copyright 2010-2017 original author or authors */\n\nvar SettableDisposable = /*#__PURE__*/function () {\n  function SettableDisposable() {\n    classCallCheck(this, SettableDisposable);\n\n    this.disposable = undefined;\n    this.disposed = false;\n  }\n\n  SettableDisposable.prototype.setDisposable = function setDisposable(disposable$$1) {\n    if (this.disposable !== void 0) {\n      throw new Error('setDisposable called more than once');\n    }\n\n    this.disposable = disposable$$1;\n\n    if (this.disposed) {\n      disposable$$1.dispose();\n    }\n  };\n\n  SettableDisposable.prototype.dispose = function dispose() {\n    if (this.disposed) {\n      return;\n    }\n\n    this.disposed = true;\n\n    if (this.disposable !== void 0) {\n      this.disposable.dispose();\n    }\n  };\n\n  return SettableDisposable;\n}();\n\n/**\n * @param {number} n\n * @param {Stream} stream\n * @returns {Stream} new stream containing only up to the first n items from stream\n */\nvar take$1 = function take(n, stream) {\n  return sliceBounds(maxBounds(n), stream);\n};\n\n/**\n * @param {number} n\n * @param {Stream} stream\n * @returns {Stream} new stream with the first n items removed\n */\nvar skip$1 = function skip(n, stream) {\n  return sliceBounds(minBounds(n), stream);\n};\n\n/**\n * Slice a stream by index. Negative start/end indexes are not supported\n * @param {number} start\n * @param {number} end\n * @param {Stream} stream\n * @returns {Stream} stream containing items where start <= index < end\n */\nvar slice$1 = function slice(start, end, stream) {\n  return sliceBounds(boundsFrom(start, end), stream);\n};\n\nvar sliceBounds = function sliceBounds(bounds, stream) {\n  return isSliceEmpty(bounds, stream) ? empty() : stream instanceof Map ? commuteMapSlice(bounds, stream) : stream instanceof Slice ? fuseSlice(bounds, stream) : createSlice(bounds, stream);\n};\n\nvar isSliceEmpty = function isSliceEmpty(bounds, stream) {\n  return isCanonicalEmpty(stream) || isNilBounds(bounds);\n};\n\nvar createSlice = function createSlice(bounds, stream) {\n  return isInfiniteBounds(bounds) ? stream : new Slice(bounds, stream);\n};\n\nvar commuteMapSlice = function commuteMapSlice(bounds, mapStream) {\n  return Map.create(mapStream.f, sliceBounds(bounds, mapStream.source));\n};\n\nvar fuseSlice = function fuseSlice(bounds, sliceStream) {\n  return sliceBounds(mergeBounds(bounds, sliceStream.bounds), sliceStream.source);\n};\n\nvar Slice = /*#__PURE__*/function () {\n  function Slice(bounds, source) {\n    classCallCheck(this, Slice);\n\n    this.source = source;\n    this.bounds = bounds;\n  }\n\n  Slice.prototype.run = function run(sink, scheduler$$1) {\n    var disposable$$1 = new SettableDisposable();\n    var sliceSink = new SliceSink(this.bounds.min, this.bounds.max - this.bounds.min, sink, disposable$$1);\n\n    disposable$$1.setDisposable(this.source.run(sliceSink, scheduler$$1));\n\n    return disposable$$1;\n  };\n\n  return Slice;\n}();\n\nvar SliceSink = /*#__PURE__*/function (_Pipe) {\n  inherits(SliceSink, _Pipe);\n\n  function SliceSink(skip, take, sink, disposable$$1) {\n    classCallCheck(this, SliceSink);\n\n    var _this = possibleConstructorReturn(this, _Pipe.call(this, sink));\n\n    _this.skip = skip;\n    _this.take = take;\n    _this.disposable = disposable$$1;\n    return _this;\n  }\n\n  SliceSink.prototype.event = function event(t, x) {\n    /* eslint complexity: [1, 4] */\n    if (this.skip > 0) {\n      this.skip -= 1;\n      return;\n    }\n\n    if (this.take === 0) {\n      return;\n    }\n\n    this.take -= 1;\n    this.sink.event(t, x);\n    if (this.take === 0) {\n      this.disposable.dispose();\n      this.sink.end(t);\n    }\n  };\n\n  return SliceSink;\n}(Pipe);\n\nvar takeWhile$1 = function takeWhile(p, stream) {\n  return isCanonicalEmpty(stream) ? empty() : new TakeWhile(p, stream);\n};\n\nvar TakeWhile = /*#__PURE__*/function () {\n  function TakeWhile(p, source) {\n    classCallCheck(this, TakeWhile);\n\n    this.p = p;\n    this.source = source;\n  }\n\n  TakeWhile.prototype.run = function run(sink, scheduler$$1) {\n    var disposable$$1 = new SettableDisposable();\n    var takeWhileSink = new TakeWhileSink(this.p, sink, disposable$$1);\n\n    disposable$$1.setDisposable(this.source.run(takeWhileSink, scheduler$$1));\n\n    return disposable$$1;\n  };\n\n  return TakeWhile;\n}();\n\nvar TakeWhileSink = /*#__PURE__*/function (_Pipe2) {\n  inherits(TakeWhileSink, _Pipe2);\n\n  function TakeWhileSink(p, sink, disposable$$1) {\n    classCallCheck(this, TakeWhileSink);\n\n    var _this2 = possibleConstructorReturn(this, _Pipe2.call(this, sink));\n\n    _this2.p = p;\n    _this2.active = true;\n    _this2.disposable = disposable$$1;\n    return _this2;\n  }\n\n  TakeWhileSink.prototype.event = function event(t, x) {\n    if (!this.active) {\n      return;\n    }\n\n    var p = this.p;\n    this.active = p(x);\n\n    if (this.active) {\n      this.sink.event(t, x);\n    } else {\n      this.disposable.dispose();\n      this.sink.end(t);\n    }\n  };\n\n  return TakeWhileSink;\n}(Pipe);\n\nvar skipWhile$1 = function skipWhile(p, stream) {\n  return isCanonicalEmpty(stream) ? empty() : new SkipWhile(p, stream);\n};\n\nvar SkipWhile = /*#__PURE__*/function () {\n  function SkipWhile(p, source) {\n    classCallCheck(this, SkipWhile);\n\n    this.p = p;\n    this.source = source;\n  }\n\n  SkipWhile.prototype.run = function run(sink, scheduler$$1) {\n    return this.source.run(new SkipWhileSink(this.p, sink), scheduler$$1);\n  };\n\n  return SkipWhile;\n}();\n\nvar SkipWhileSink = /*#__PURE__*/function (_Pipe3) {\n  inherits(SkipWhileSink, _Pipe3);\n\n  function SkipWhileSink(p, sink) {\n    classCallCheck(this, SkipWhileSink);\n\n    var _this3 = possibleConstructorReturn(this, _Pipe3.call(this, sink));\n\n    _this3.p = p;\n    _this3.skipping = true;\n    return _this3;\n  }\n\n  SkipWhileSink.prototype.event = function event(t, x) {\n    if (this.skipping) {\n      var p = this.p;\n      this.skipping = p(x);\n      if (this.skipping) {\n        return;\n      }\n    }\n\n    this.sink.event(t, x);\n  };\n\n  return SkipWhileSink;\n}(Pipe);\n\nvar skipAfter$1 = function skipAfter(p, stream) {\n  return isCanonicalEmpty(stream) ? empty() : new SkipAfter(p, stream);\n};\n\nvar SkipAfter = /*#__PURE__*/function () {\n  function SkipAfter(p, source) {\n    classCallCheck(this, SkipAfter);\n\n    this.p = p;\n    this.source = source;\n  }\n\n  SkipAfter.prototype.run = function run(sink, scheduler$$1) {\n    return this.source.run(new SkipAfterSink(this.p, sink), scheduler$$1);\n  };\n\n  return SkipAfter;\n}();\n\nvar SkipAfterSink = /*#__PURE__*/function (_Pipe4) {\n  inherits(SkipAfterSink, _Pipe4);\n\n  function SkipAfterSink(p, sink) {\n    classCallCheck(this, SkipAfterSink);\n\n    var _this4 = possibleConstructorReturn(this, _Pipe4.call(this, sink));\n\n    _this4.p = p;\n    _this4.skipping = false;\n    return _this4;\n  }\n\n  SkipAfterSink.prototype.event = function event(t, x) {\n    if (this.skipping) {\n      return;\n    }\n\n    var p = this.p;\n    this.skipping = p(x);\n    this.sink.event(t, x);\n\n    if (this.skipping) {\n      this.sink.end(t);\n    }\n  };\n\n  return SkipAfterSink;\n}(Pipe);\n\n/** @license MIT License (c) copyright 2017 original author or authors */\n\nvar withItems$1 = function withItems(items, stream) {\n  return zipItems$1(keepLeft, items, stream);\n};\n\nvar zipItems$1 = function zipItems(f, items, stream) {\n  return isCanonicalEmpty(stream) || items.length === 0 ? empty() : new ZipItems(f, items, take$1(items.length, stream));\n};\n\nvar keepLeft = function keepLeft(a, _) {\n  return a;\n};\n\nvar ZipItems = /*#__PURE__*/function () {\n  function ZipItems(f, items, source) {\n    classCallCheck(this, ZipItems);\n\n    this.f = f;\n    this.items = items;\n    this.source = source;\n  }\n\n  ZipItems.prototype.run = function run(sink, scheduler$$1) {\n    return this.source.run(new ZipItemsSink(this.f, this.items, sink), scheduler$$1);\n  };\n\n  return ZipItems;\n}();\n\nvar ZipItemsSink = /*#__PURE__*/function (_Pipe) {\n  inherits(ZipItemsSink, _Pipe);\n\n  function ZipItemsSink(f, items, sink) {\n    classCallCheck(this, ZipItemsSink);\n\n    var _this = possibleConstructorReturn(this, _Pipe.call(this, sink));\n\n    _this.f = f;\n    _this.items = items;\n    _this.index = 0;\n    return _this;\n  }\n\n  ZipItemsSink.prototype.event = function event(t, b) {\n    var f = this.f;\n    this.sink.event(t, f(this.items[this.index], b));\n    this.index += 1;\n  };\n\n  return ZipItemsSink;\n}(Pipe);\n\n/** @license MIT License (c) copyright 2010-2017 original author or authors */\n\nvar runEffects$1 = /*#__PURE__*/curry2(function (stream, scheduler$$1) {\n  return new Promise(function (resolve, reject) {\n    return runStream(stream, scheduler$$1, resolve, reject);\n  });\n});\n\nfunction runStream(stream, scheduler$$1, resolve, reject) {\n  var disposable$$1 = new SettableDisposable();\n  var observer = new RunEffectsSink(resolve, reject, disposable$$1);\n\n  disposable$$1.setDisposable(stream.run(observer, scheduler$$1));\n}\n\nvar RunEffectsSink = /*#__PURE__*/function () {\n  function RunEffectsSink(end, error, disposable$$1) {\n    classCallCheck(this, RunEffectsSink);\n\n    this._end = end;\n    this._error = error;\n    this._disposable = disposable$$1;\n    this.active = true;\n  }\n\n  RunEffectsSink.prototype.event = function event(t, x) {};\n\n  RunEffectsSink.prototype.end = function end(t) {\n    if (!this.active) {\n      return;\n    }\n    this._dispose(this._error, this._end, undefined);\n  };\n\n  RunEffectsSink.prototype.error = function error(t, e) {\n    this._dispose(this._error, this._error, e);\n  };\n\n  RunEffectsSink.prototype._dispose = function _dispose(error, end, x) {\n    this.active = false;\n    tryDispose$1(error, end, x, this._disposable);\n  };\n\n  return RunEffectsSink;\n}();\n\nfunction tryDispose$1(error, end, x, disposable$$1) {\n  try {\n    disposable$$1.dispose();\n  } catch (e) {\n    error(e);\n    return;\n  }\n\n  end(x);\n}\n\n/** @license MIT License (c) copyright 2010-2017 original author or authors */\n\n// Run a Stream, sending all its events to the\n// provided Sink.\nvar run$1 = function run(sink, scheduler$$1, stream) {\n    return stream.run(sink, scheduler$$1);\n};\n\nvar RelativeSink = /*#__PURE__*/function () {\n  function RelativeSink(offset, sink) {\n    classCallCheck(this, RelativeSink);\n\n    this.sink = sink;\n    this.offset = offset;\n  }\n\n  RelativeSink.prototype.event = function event(t, x) {\n    this.sink.event(t + this.offset, x);\n  };\n\n  RelativeSink.prototype.error = function error(t, e) {\n    this.sink.error(t + this.offset, e);\n  };\n\n  RelativeSink.prototype.end = function end(t) {\n    this.sink.end(t + this.offset);\n  };\n\n  return RelativeSink;\n}();\n\n// Create a stream with its own local clock\n// This transforms time from the provided scheduler's clock to a stream-local\n// clock (which starts at 0), and then *back* to the scheduler's clock before\n// propagating events to sink.  In other words, upstream sources will see local times,\n// and downstream sinks will see non-local (original) times.\nvar withLocalTime$1 = function withLocalTime(origin, stream) {\n  return new WithLocalTime(origin, stream);\n};\n\nvar WithLocalTime = /*#__PURE__*/function () {\n  function WithLocalTime(origin, source) {\n    classCallCheck(this, WithLocalTime);\n\n    this.origin = origin;\n    this.source = source;\n  }\n\n  WithLocalTime.prototype.run = function run(sink, scheduler$$1) {\n    return this.source.run(relativeSink(this.origin, sink), schedulerRelativeTo(this.origin, scheduler$$1));\n  };\n\n  return WithLocalTime;\n}();\n\n// Accumulate offsets instead of nesting RelativeSinks, which can happen\n// with higher-order stream and combinators like continueWith when they're\n// applied recursively.\n\n\nvar relativeSink = function relativeSink(origin, sink) {\n  return sink instanceof RelativeSink ? new RelativeSink(origin + sink.offset, sink.sink) : new RelativeSink(origin, sink);\n};\n\n/** @license MIT License (c) copyright 2010 original author or authors */\n\n/**\n * Generalized feedback loop. Call a stepper function for each event. The stepper\n * will be called with 2 params: the current seed and the an event value.  It must\n * return a new { seed, value } pair. The `seed` will be fed back into the next\n * invocation of stepper, and the `value` will be propagated as the event value.\n * @param {function(seed:*, value:*):{seed:*, value:*}} stepper loop step function\n * @param {*} seed initial seed value passed to first stepper call\n * @param {Stream} stream event stream\n * @returns {Stream} new stream whose values are the `value` field of the objects\n * returned by the stepper\n */\nvar loop$1 = function loop(stepper, seed, stream) {\n  return isCanonicalEmpty(stream) ? empty() : new Loop(stepper, seed, stream);\n};\n\nvar Loop = /*#__PURE__*/function () {\n  function Loop(stepper, seed, source) {\n    classCallCheck(this, Loop);\n\n    this.step = stepper;\n    this.seed = seed;\n    this.source = source;\n  }\n\n  Loop.prototype.run = function run(sink, scheduler$$1) {\n    return this.source.run(new LoopSink(this.step, this.seed, sink), scheduler$$1);\n  };\n\n  return Loop;\n}();\n\nvar LoopSink = /*#__PURE__*/function (_Pipe) {\n  inherits(LoopSink, _Pipe);\n\n  function LoopSink(stepper, seed, sink) {\n    classCallCheck(this, LoopSink);\n\n    var _this = possibleConstructorReturn(this, _Pipe.call(this, sink));\n\n    _this.step = stepper;\n    _this.seed = seed;\n    return _this;\n  }\n\n  LoopSink.prototype.event = function event(t, x) {\n    var result = this.step(this.seed, x);\n    this.seed = result.seed;\n    this.sink.event(t, result.value);\n  };\n\n  return LoopSink;\n}(Pipe);\n\n/** @license MIT License (c) copyright 2010-2016 original author or authors */\n/** @author Brian Cavalier */\n/** @author John Hann */\n\n/**\n * Create a stream containing successive reduce results of applying f to\n * the previous reduce result and the current stream item.\n * @param {function(result:*, x:*):*} f reducer function\n * @param {*} initial initial value\n * @param {Stream} stream stream to scan\n * @returns {Stream} new stream containing successive reduce results\n */\nvar scan$1 = function scan(f, initial, stream) {\n  return new Scan(f, initial, stream);\n};\n\nvar Scan = /*#__PURE__*/function () {\n  function Scan(f, z, source) {\n    classCallCheck(this, Scan);\n\n    this.source = source;\n    this.f = f;\n    this.value = z;\n  }\n\n  Scan.prototype.run = function run(sink, scheduler$$1) {\n    var d1 = asap(propagateEventTask$1(this.value, sink), scheduler$$1);\n    var d2 = this.source.run(new ScanSink(this.f, this.value, sink), scheduler$$1);\n    return disposeBoth(d1, d2);\n  };\n\n  return Scan;\n}();\n\nvar ScanSink = /*#__PURE__*/function (_Pipe) {\n  inherits(ScanSink, _Pipe);\n\n  function ScanSink(f, z, sink) {\n    classCallCheck(this, ScanSink);\n\n    var _this = possibleConstructorReturn(this, _Pipe.call(this, sink));\n\n    _this.f = f;\n    _this.value = z;\n    return _this;\n  }\n\n  ScanSink.prototype.event = function event(t, x) {\n    var f = this.f;\n    this.value = f(this.value, x);\n    this.sink.event(t, this.value);\n  };\n\n  return ScanSink;\n}(Pipe);\n\n/** @license MIT License (c) copyright 2010-2016 original author or authors */\n/** @author Brian Cavalier */\n/** @author John Hann */\n\nvar continueWith$1 = function continueWith(f, stream) {\n  return new ContinueWith(f, stream);\n};\n\nvar ContinueWith = /*#__PURE__*/function () {\n  function ContinueWith(f, source) {\n    classCallCheck(this, ContinueWith);\n\n    this.f = f;\n    this.source = source;\n  }\n\n  ContinueWith.prototype.run = function run(sink, scheduler$$1) {\n    return new ContinueWithSink(this.f, this.source, sink, scheduler$$1);\n  };\n\n  return ContinueWith;\n}();\n\nvar ContinueWithSink = /*#__PURE__*/function (_Pipe) {\n  inherits(ContinueWithSink, _Pipe);\n\n  function ContinueWithSink(f, source, sink, scheduler$$1) {\n    classCallCheck(this, ContinueWithSink);\n\n    var _this = possibleConstructorReturn(this, _Pipe.call(this, sink));\n\n    _this.f = f;\n    _this.scheduler = scheduler$$1;\n    _this.active = true;\n    _this.disposable = disposeOnce(source.run(_this, scheduler$$1));\n    return _this;\n  }\n\n  ContinueWithSink.prototype.event = function event(t, x) {\n    if (!this.active) {\n      return;\n    }\n    this.sink.event(t, x);\n  };\n\n  ContinueWithSink.prototype.end = function end(t) {\n    if (!this.active) {\n      return;\n    }\n\n    tryDispose(t, this.disposable, this.sink);\n\n    this._startNext(t, this.sink);\n  };\n\n  ContinueWithSink.prototype._startNext = function _startNext(t, sink) {\n    try {\n      this.disposable = this._continue(this.f, t, sink);\n    } catch (e) {\n      sink.error(t, e);\n    }\n  };\n\n  ContinueWithSink.prototype._continue = function _continue(f, t, sink) {\n    return run$1(sink, this.scheduler, withLocalTime$1(t, f()));\n  };\n\n  ContinueWithSink.prototype.dispose = function dispose() {\n    this.active = false;\n    return this.disposable.dispose();\n  };\n\n  return ContinueWithSink;\n}(Pipe);\n\n/** @license MIT License (c) copyright 2010-2017 original author or authors */\n\nvar startWith$1 = function startWith(x, stream) {\n  return continueWith$1(function () {\n    return stream;\n  }, now(x));\n};\n\n/** @license MIT License (c) copyright 2010-2016 original author or authors */\n/** @author Brian Cavalier */\n/** @author John Hann */\n\n/**\n * Transform each value in the stream by applying f to each\n * @param {function(*):*} f mapping function\n * @param {Stream} stream stream to map\n * @returns {Stream} stream containing items transformed by f\n */\nvar map$2 = function map$$1(f, stream) {\n  return Map.create(f, stream);\n};\n\n/**\n* Replace each value in the stream with x\n* @param {*} x\n* @param {Stream} stream\n* @returns {Stream} stream containing items replaced with x\n*/\nvar constant$1 = function constant(x, stream) {\n  return map$2(function () {\n    return x;\n  }, stream);\n};\n\n/**\n* Perform a side effect for each item in the stream\n* @param {function(x:*):*} f side effect to execute for each item. The\n*  return value will be discarded.\n* @param {Stream} stream stream to tap\n* @returns {Stream} new stream containing the same items as this stream\n*/\nvar tap$1 = function tap(f, stream) {\n  return new Tap(f, stream);\n};\n\nvar Tap = /*#__PURE__*/function () {\n  function Tap(f, source) {\n    classCallCheck(this, Tap);\n\n    this.source = source;\n    this.f = f;\n  }\n\n  Tap.prototype.run = function run(sink, scheduler$$1) {\n    return this.source.run(new TapSink(this.f, sink), scheduler$$1);\n  };\n\n  return Tap;\n}();\n\nvar TapSink = /*#__PURE__*/function (_Pipe) {\n  inherits(TapSink, _Pipe);\n\n  function TapSink(f, sink) {\n    classCallCheck(this, TapSink);\n\n    var _this = possibleConstructorReturn(this, _Pipe.call(this, sink));\n\n    _this.f = f;\n    return _this;\n  }\n\n  TapSink.prototype.event = function event(t, x) {\n    var f = this.f;\n    f(x);\n    this.sink.event(t, x);\n  };\n\n  return TapSink;\n}(Pipe);\n\n/** @license MIT License (c) copyright 2010-2016 original author or authors */\n/** @author Brian Cavalier */\n/** @author John Hann */\n\nvar IndexSink = /*#__PURE__*/function (_Sink) {\n  inherits(IndexSink, _Sink);\n\n  function IndexSink(i, sink) {\n    classCallCheck(this, IndexSink);\n\n    var _this = possibleConstructorReturn(this, _Sink.call(this, sink));\n\n    _this.index = i;\n    _this.active = true;\n    _this.value = undefined;\n    return _this;\n  }\n\n  IndexSink.prototype.event = function event(t, x) {\n    if (!this.active) {\n      return;\n    }\n    this.value = x;\n    this.sink.event(t, this);\n  };\n\n  IndexSink.prototype.end = function end(t) {\n    if (!this.active) {\n      return;\n    }\n    this.active = false;\n    this.sink.event(t, this);\n  };\n\n  return IndexSink;\n}(Pipe);\n\n/** @license MIT License (c) copyright 2010-2016 original author or authors */\n/** @author Brian Cavalier */\n/** @author John Hann */\n\nfunction invoke(f, args) {\n  /* eslint complexity: [2,7] */\n  switch (args.length) {\n    case 0:\n      return f();\n    case 1:\n      return f(args[0]);\n    case 2:\n      return f(args[0], args[1]);\n    case 3:\n      return f(args[0], args[1], args[2]);\n    case 4:\n      return f(args[0], args[1], args[2], args[3]);\n    case 5:\n      return f(args[0], args[1], args[2], args[3], args[4]);\n    default:\n      return f.apply(void 0, args);\n  }\n}\n\n/** @license MIT License (c) copyright 2010 original author or authors */\n\n/**\n * Combine latest events from two streams\n * @param {function(...events):*} f function to combine most recent events\n * @returns {Stream} stream containing the result of applying f to the most recent\n *  event of each input stream, whenever a new event arrives on any stream.\n */\nvar combine$1 = function combine(f, stream1, stream2) {\n  return combineArray$1(f, [stream1, stream2]);\n};\n\n/**\n* Combine latest events from all input streams\n* @param {function(...events):*} f function to combine most recent events\n* @param {[Stream]} streams most recent events\n* @returns {Stream} stream containing the result of applying f to the most recent\n*  event of each input stream, whenever a new event arrives on any stream.\n*/\nvar combineArray$1 = function combineArray(f, streams) {\n  return streams.length === 0 || containsCanonicalEmpty(streams) ? empty() : streams.length === 1 ? map$2(f, streams[0]) : new Combine(f, streams);\n};\n\nvar Combine = /*#__PURE__*/function () {\n  function Combine(f, sources) {\n    classCallCheck(this, Combine);\n\n    this.f = f;\n    this.sources = sources;\n  }\n\n  Combine.prototype.run = function run(sink, scheduler$$1) {\n    var l = this.sources.length;\n    var disposables = new Array(l);\n    var sinks = new Array(l);\n\n    var mergeSink = new CombineSink(disposables, sinks, sink, this.f);\n\n    for (var indexSink, i = 0; i < l; ++i) {\n      indexSink = sinks[i] = new IndexSink(i, mergeSink);\n      disposables[i] = this.sources[i].run(indexSink, scheduler$$1);\n    }\n\n    return disposeAll(disposables);\n  };\n\n  return Combine;\n}();\n\nvar CombineSink = /*#__PURE__*/function (_Pipe) {\n  inherits(CombineSink, _Pipe);\n\n  function CombineSink(disposables, sinks, sink, f) {\n    classCallCheck(this, CombineSink);\n\n    var _this = possibleConstructorReturn(this, _Pipe.call(this, sink));\n\n    _this.disposables = disposables;\n    _this.sinks = sinks;\n    _this.f = f;\n\n    var l = sinks.length;\n    _this.awaiting = l;\n    _this.values = new Array(l);\n    _this.hasValue = new Array(l).fill(false);\n    _this.activeCount = sinks.length;\n    return _this;\n  }\n\n  CombineSink.prototype.event = function event(t, indexedValue) {\n    if (!indexedValue.active) {\n      this._dispose(t, indexedValue.index);\n      return;\n    }\n\n    var i = indexedValue.index;\n    var awaiting = this._updateReady(i);\n\n    this.values[i] = indexedValue.value;\n    if (awaiting === 0) {\n      this.sink.event(t, invoke(this.f, this.values));\n    }\n  };\n\n  CombineSink.prototype._updateReady = function _updateReady(index) {\n    if (this.awaiting > 0) {\n      if (!this.hasValue[index]) {\n        this.hasValue[index] = true;\n        this.awaiting -= 1;\n      }\n    }\n    return this.awaiting;\n  };\n\n  CombineSink.prototype._dispose = function _dispose(t, index) {\n    tryDispose(t, this.disposables[index], this.sink);\n    if (--this.activeCount === 0) {\n      this.sink.end(t);\n    }\n  };\n\n  return CombineSink;\n}(Pipe);\n\n/** @license MIT License (c) copyright 2010-2016 original author or authors */\n/** @author Brian Cavalier */\n/** @author John Hann */\n\n/**\n * Assume fs is a stream containing functions, and apply the latest function\n * in fs to the latest value in xs.\n * fs:         --f---------g--------h------>\n * xs:         -a-------b-------c-------d-->\n * ap(fs, xs): --fa-----fb-gb---gc--hc--hd->\n * @param {Stream} fs stream of functions to apply to the latest x\n * @param {Stream} xs stream of values to which to apply all the latest f\n * @returns {Stream} stream containing all the applications of fs to xs\n */\nfunction ap$1(fs, xs) {\n  return combine$1(apply, fs, xs);\n}\n\n/** @license MIT License (c) copyright 2010 original author or authors */\n\n/**\n * Doubly linked list\n * @constructor\n */\nvar LinkedList = /*#__PURE__*/function () {\n  function LinkedList() {\n    classCallCheck(this, LinkedList);\n\n    this.head = null;\n    this.length = 0;\n  }\n\n  /**\n   * Add a node to the end of the list\n   * @param {{prev:Object|null, next:Object|null, dispose:function}} x node to add\n   */\n\n\n  LinkedList.prototype.add = function add(x) {\n    if (this.head !== null) {\n      this.head.prev = x;\n      x.next = this.head;\n    }\n    this.head = x;\n    ++this.length;\n  };\n\n  /**\n   * Remove the provided node from the list\n   * @param {{prev:Object|null, next:Object|null, dispose:function}} x node to remove\n   */\n\n\n  LinkedList.prototype.remove = function remove$$1(x) {\n    // eslint-disable-line  complexity\n    --this.length;\n    if (x === this.head) {\n      this.head = this.head.next;\n    }\n    if (x.next !== null) {\n      x.next.prev = x.prev;\n      x.next = null;\n    }\n    if (x.prev !== null) {\n      x.prev.next = x.next;\n      x.prev = null;\n    }\n  };\n\n  /**\n   * @returns {boolean} true iff there are no nodes in the list\n   */\n\n\n  LinkedList.prototype.isEmpty = function isEmpty() {\n    return this.length === 0;\n  };\n\n  /**\n   * Dispose all nodes\n   * @returns {void}\n   */\n\n\n  LinkedList.prototype.dispose = function dispose() {\n    if (this.isEmpty()) {\n      return;\n    }\n\n    var head = this.head;\n    this.head = null;\n    this.length = 0;\n\n    while (head !== null) {\n      head.dispose();\n      head = head.next;\n    }\n  };\n\n  return LinkedList;\n}();\n\n/** @license MIT License (c) copyright 2010 original author or authors */\n\nvar mergeConcurrently$1 = function mergeConcurrently(concurrency, stream) {\n  return mergeMapConcurrently$1(id, concurrency, stream);\n};\n\nvar mergeMapConcurrently$1 = function mergeMapConcurrently(f, concurrency, stream) {\n  return isCanonicalEmpty(stream) ? empty() : new MergeConcurrently(f, concurrency, stream);\n};\n\nvar MergeConcurrently = /*#__PURE__*/function () {\n  function MergeConcurrently(f, concurrency, source) {\n    classCallCheck(this, MergeConcurrently);\n\n    this.f = f;\n    this.concurrency = concurrency;\n    this.source = source;\n  }\n\n  MergeConcurrently.prototype.run = function run(sink, scheduler$$1) {\n    return new Outer(this.f, this.concurrency, this.source, sink, scheduler$$1);\n  };\n\n  return MergeConcurrently;\n}();\n\nvar Outer = /*#__PURE__*/function () {\n  function Outer(f, concurrency, source, sink, scheduler$$1) {\n    classCallCheck(this, Outer);\n\n    this.f = f;\n    this.concurrency = concurrency;\n    this.sink = sink;\n    this.scheduler = scheduler$$1;\n    this.pending = [];\n    this.current = new LinkedList();\n    this.disposable = disposeOnce(source.run(this, scheduler$$1));\n    this.active = true;\n  }\n\n  Outer.prototype.event = function event(t, x) {\n    this._addInner(t, x);\n  };\n\n  Outer.prototype._addInner = function _addInner(t, x) {\n    if (this.current.length < this.concurrency) {\n      this._startInner(t, x);\n    } else {\n      this.pending.push(x);\n    }\n  };\n\n  Outer.prototype._startInner = function _startInner(t, x) {\n    try {\n      this._initInner(t, x);\n    } catch (e) {\n      this.error(t, e);\n    }\n  };\n\n  Outer.prototype._initInner = function _initInner(t, x) {\n    var innerSink = new Inner(t, this, this.sink);\n    innerSink.disposable = mapAndRun(this.f, t, x, innerSink, this.scheduler);\n    this.current.add(innerSink);\n  };\n\n  Outer.prototype.end = function end(t) {\n    this.active = false;\n    tryDispose(t, this.disposable, this.sink);\n    this._checkEnd(t);\n  };\n\n  Outer.prototype.error = function error(t, e) {\n    this.active = false;\n    this.sink.error(t, e);\n  };\n\n  Outer.prototype.dispose = function dispose() {\n    this.active = false;\n    this.pending.length = 0;\n    this.disposable.dispose();\n    this.current.dispose();\n  };\n\n  Outer.prototype._endInner = function _endInner(t, inner) {\n    this.current.remove(inner);\n    tryDispose(t, inner, this);\n\n    if (this.pending.length === 0) {\n      this._checkEnd(t);\n    } else {\n      this._startInner(t, this.pending.shift());\n    }\n  };\n\n  Outer.prototype._checkEnd = function _checkEnd(t) {\n    if (!this.active && this.current.isEmpty()) {\n      this.sink.end(t);\n    }\n  };\n\n  return Outer;\n}();\n\nvar mapAndRun = function mapAndRun(f, t, x, sink, scheduler$$1) {\n  return f(x).run(sink, schedulerRelativeTo(t, scheduler$$1));\n};\n\nvar Inner = /*#__PURE__*/function () {\n  function Inner(time, outer, sink) {\n    classCallCheck(this, Inner);\n\n    this.prev = this.next = null;\n    this.time = time;\n    this.outer = outer;\n    this.sink = sink;\n    this.disposable = void 0;\n  }\n\n  Inner.prototype.event = function event(t, x) {\n    this.sink.event(t + this.time, x);\n  };\n\n  Inner.prototype.end = function end(t) {\n    this.outer._endInner(t + this.time, this);\n  };\n\n  Inner.prototype.error = function error(t, e) {\n    this.outer.error(t + this.time, e);\n  };\n\n  Inner.prototype.dispose = function dispose() {\n    return this.disposable.dispose();\n  };\n\n  return Inner;\n}();\n\n/** @license MIT License (c) copyright 2010-2016 original author or authors */\n/** @author Brian Cavalier */\n/** @author John Hann */\n\n/**\n * Map each value in the stream to a new stream, and merge it into the\n * returned outer stream. Event arrival times are preserved.\n * @param {function(x:*):Stream} f chaining function, must return a Stream\n * @param {Stream} stream\n * @returns {Stream} new stream containing all events from each stream returned by f\n */\nvar chain$1 = function chain(f, stream) {\n  return mergeMapConcurrently$1(f, Infinity, stream);\n};\n\n/**\n * Monadic join. Flatten a Stream<Stream<X>> to Stream<X> by merging inner\n * streams to the outer. Event arrival times are preserved.\n * @param {Stream<Stream<X>>} stream stream of streams\n * @returns {Stream<X>} new stream containing all events of all inner streams\n */\nvar join = function join(stream) {\n  return mergeConcurrently$1(Infinity, stream);\n};\n\n/** @license MIT License (c) copyright 2010-2016 original author or authors */\n/** @author Brian Cavalier */\n/** @author John Hann */\n\n/**\n * Map each value in stream to a new stream, and concatenate them all\n * stream:              -a---b---cX\n * f(a):                 1-1-1-1X\n * f(b):                        -2-2-2-2X\n * f(c):                                -3-3-3-3X\n * stream.concatMap(f): -1-1-1-1-2-2-2-2-3-3-3-3X\n * @param {function(x:*):Stream} f function to map each value to a stream\n * @param {Stream} stream\n * @returns {Stream} new stream containing all events from each stream returned by f\n */\nvar concatMap$1 = function concatMap(f, stream) {\n  return mergeMapConcurrently$1(f, 1, stream);\n};\n\n/** @license MIT License (c) copyright 2010-2016 original author or authors */\n/** @author Brian Cavalier */\n/** @author John Hann */\n\n/**\n * @returns {Stream} stream containing events from two streams in time order.\n * If two events are simultaneous they will be merged in arbitrary order.\n */\nfunction merge$1(stream1, stream2) {\n  return mergeArray([stream1, stream2]);\n}\n\n/**\n * @param {Array} streams array of stream to merge\n * @returns {Stream} stream containing events from all input observables\n * in time order.  If two events are simultaneous they will be merged in\n * arbitrary order.\n */\nvar mergeArray = function mergeArray(streams) {\n  return mergeStreams(withoutCanonicalEmpty(streams));\n};\n\n/**\n * This implements fusion/flattening for merge.  It will\n * fuse adjacent merge operations.  For example:\n * - a.merge(b).merge(c) effectively becomes merge(a, b, c)\n * - merge(a, merge(b, c)) effectively becomes merge(a, b, c)\n * It does this by concatenating the sources arrays of\n * any nested Merge sources, in effect \"flattening\" nested\n * merge operations into a single merge.\n */\nvar mergeStreams = function mergeStreams(streams) {\n  return streams.length === 0 ? empty() : streams.length === 1 ? streams[0] : new Merge(reduce(appendSources, [], streams));\n};\n\nvar withoutCanonicalEmpty = function withoutCanonicalEmpty(streams) {\n  return streams.filter(isNotCanonicalEmpty);\n};\n\nvar isNotCanonicalEmpty = function isNotCanonicalEmpty(stream) {\n  return !isCanonicalEmpty(stream);\n};\n\nvar appendSources = function appendSources(sources, stream) {\n  return sources.concat(stream instanceof Merge ? stream.sources : stream);\n};\n\nvar Merge = /*#__PURE__*/function () {\n  function Merge(sources) {\n    classCallCheck(this, Merge);\n\n    this.sources = sources;\n  }\n\n  Merge.prototype.run = function run(sink, scheduler$$1) {\n    var l = this.sources.length;\n    var disposables = new Array(l);\n    var sinks = new Array(l);\n\n    var mergeSink = new MergeSink(disposables, sinks, sink);\n\n    for (var indexSink, i = 0; i < l; ++i) {\n      indexSink = sinks[i] = new IndexSink(i, mergeSink);\n      disposables[i] = this.sources[i].run(indexSink, scheduler$$1);\n    }\n\n    return disposeAll(disposables);\n  };\n\n  return Merge;\n}();\n\nvar MergeSink = /*#__PURE__*/function (_Pipe) {\n  inherits(MergeSink, _Pipe);\n\n  function MergeSink(disposables, sinks, sink) {\n    classCallCheck(this, MergeSink);\n\n    var _this = possibleConstructorReturn(this, _Pipe.call(this, sink));\n\n    _this.disposables = disposables;\n    _this.activeCount = sinks.length;\n    return _this;\n  }\n\n  MergeSink.prototype.event = function event(t, indexValue) {\n    if (!indexValue.active) {\n      this._dispose(t, indexValue.index);\n      return;\n    }\n    this.sink.event(t, indexValue.value);\n  };\n\n  MergeSink.prototype._dispose = function _dispose(t, index) {\n    tryDispose(t, this.disposables[index], this.sink);\n    if (--this.activeCount === 0) {\n      this.sink.end(t);\n    }\n  };\n\n  return MergeSink;\n}(Pipe);\n\n/** @license MIT License (c) copyright 2010 original author or authors */\n\nvar sample$1 = function sample(values, sampler) {\n  return snapshot$1(function (x, _) {\n    return x;\n  }, values, sampler);\n};\n\nvar snapshot$1 = function snapshot(f, values, sampler) {\n  return isCanonicalEmpty(sampler) || isCanonicalEmpty(values) ? empty() : new Snapshot(f, values, sampler);\n};\n\nvar Snapshot = /*#__PURE__*/function () {\n  function Snapshot(f, values, sampler) {\n    classCallCheck(this, Snapshot);\n\n    this.f = f;\n    this.values = values;\n    this.sampler = sampler;\n  }\n\n  Snapshot.prototype.run = function run(sink, scheduler$$1) {\n    var sampleSink = new SnapshotSink(this.f, sink);\n    var valuesDisposable = this.values.run(sampleSink.latest, scheduler$$1);\n    var samplerDisposable = this.sampler.run(sampleSink, scheduler$$1);\n\n    return disposeBoth(samplerDisposable, valuesDisposable);\n  };\n\n  return Snapshot;\n}();\n\nvar SnapshotSink = /*#__PURE__*/function (_Pipe) {\n  inherits(SnapshotSink, _Pipe);\n\n  function SnapshotSink(f, sink) {\n    classCallCheck(this, SnapshotSink);\n\n    var _this = possibleConstructorReturn(this, _Pipe.call(this, sink));\n\n    _this.f = f;\n    _this.latest = new LatestValueSink(_this);\n    return _this;\n  }\n\n  SnapshotSink.prototype.event = function event(t, x) {\n    if (this.latest.hasValue) {\n      var f = this.f;\n      this.sink.event(t, f(this.latest.value, x));\n    }\n  };\n\n  return SnapshotSink;\n}(Pipe);\n\nvar LatestValueSink = /*#__PURE__*/function (_Pipe2) {\n  inherits(LatestValueSink, _Pipe2);\n\n  function LatestValueSink(sink) {\n    classCallCheck(this, LatestValueSink);\n\n    var _this2 = possibleConstructorReturn(this, _Pipe2.call(this, sink));\n\n    _this2.hasValue = false;\n    return _this2;\n  }\n\n  LatestValueSink.prototype.event = function event(t, x) {\n    this.value = x;\n    this.hasValue = true;\n  };\n\n  LatestValueSink.prototype.end = function end() {};\n\n  return LatestValueSink;\n}(Pipe);\n\n// Copied and modified from https://github.com/invertase/denque\n// MIT License\n\n// These constants were extracted directly from denque's shift()\n// It's not clear exactly why the authors chose these particular\n// values, but given denque's stated goals, it seems likely that\n// they were chosen for speed/memory reasons.\n\n// Max value of _head at which Queue is willing to shink\n// its internal array\nvar HEAD_MAX_SHRINK = 2;\n\n// Min value of _tail at which Queue is willing to shink\n// its internal array\nvar TAIL_MIN_SHRINK = 10000;\n\nvar Queue = /*#__PURE__*/function () {\n  function Queue() {\n    classCallCheck(this, Queue);\n\n    this._head = 0;\n    this._tail = 0;\n    this._capacityMask = 0x3;\n    this._list = new Array(4);\n  }\n\n  Queue.prototype.push = function push(x) {\n    var tail = this._tail;\n    this._list[tail] = x;\n    this._tail = tail + 1 & this._capacityMask;\n    if (this._tail === this._head) {\n      this._growArray();\n    }\n\n    if (this._head < this._tail) {\n      return this._tail - this._head;\n    } else {\n      return this._capacityMask + 1 - (this._head - this._tail);\n    }\n  };\n\n  Queue.prototype.shift = function shift() {\n    var head = this._head;\n    if (head === this._tail) {\n      return undefined;\n    }\n\n    var x = this._list[head];\n    this._list[head] = undefined;\n    this._head = head + 1 & this._capacityMask;\n    if (head < HEAD_MAX_SHRINK && this._tail > TAIL_MIN_SHRINK && this._tail <= this._list.length >>> 2) {\n      this._shrinkArray();\n    }\n\n    return x;\n  };\n\n  Queue.prototype.isEmpty = function isEmpty() {\n    return this._head === this._tail;\n  };\n\n  Queue.prototype.length = function length() {\n    if (this._head === this._tail) {\n      return 0;\n    } else if (this._head < this._tail) {\n      return this._tail - this._head;\n    } else {\n      return this._capacityMask + 1 - (this._head - this._tail);\n    }\n  };\n\n  Queue.prototype._growArray = function _growArray() {\n    if (this._head) {\n      // copy existing data, head to end, then beginning to tail.\n      this._list = this._copyArray();\n      this._head = 0;\n    }\n\n    // head is at 0 and array is now full, safe to extend\n    this._tail = this._list.length;\n\n    this._list.length *= 2;\n    this._capacityMask = this._capacityMask << 1 | 1;\n  };\n\n  Queue.prototype._shrinkArray = function _shrinkArray() {\n    this._list.length >>>= 1;\n    this._capacityMask >>>= 1;\n  };\n\n  Queue.prototype._copyArray = function _copyArray() {\n    var newArray = [];\n    var list = this._list;\n    var len = list.length;\n\n    var i = void 0;\n    for (i = this._head; i < len; i++) {\n      newArray.push(list[i]);\n    }\n    for (i = 0; i < this._tail; i++) {\n      newArray.push(list[i]);\n    }\n\n    return newArray;\n  };\n\n  return Queue;\n}();\n\n/** @license MIT License (c) copyright 2010 original author or authors */\n\n/**\n * Combine two streams pairwise by index by applying f to values at corresponding\n * indices.  The returned stream ends when either of the input streams ends.\n * @param {function} f function to combine values\n * @returns {Stream} new stream with items at corresponding indices combined\n *  using f\n */\nfunction zip$1(f, stream1, stream2) {\n  return zipArray$1(f, [stream1, stream2]);\n}\n\n/**\n* Combine streams pairwise (or tuple-wise) by index by applying f to values\n* at corresponding indices.  The returned stream ends when any of the input\n* streams ends.\n* @param {function} f function to combine values\n* @param {[Stream]} streams streams to zip using f\n* @returns {Stream} new stream with items at corresponding indices combined\n*  using f\n*/\nvar zipArray$1 = function zipArray(f, streams) {\n  return streams.length === 0 || containsCanonicalEmpty(streams) ? empty() : streams.length === 1 ? map$2(f, streams[0]) : new Zip(f, streams);\n};\n\nvar Zip = /*#__PURE__*/function () {\n  function Zip(f, sources) {\n    classCallCheck(this, Zip);\n\n    this.f = f;\n    this.sources = sources;\n  }\n\n  Zip.prototype.run = function run(sink, scheduler$$1) {\n    var l = this.sources.length;\n    var disposables = new Array(l);\n    var sinks = new Array(l);\n    var buffers = new Array(l);\n\n    var zipSink = new ZipSink(this.f, buffers, sinks, sink);\n\n    for (var indexSink, i = 0; i < l; ++i) {\n      buffers[i] = new Queue();\n      indexSink = sinks[i] = new IndexSink(i, zipSink);\n      disposables[i] = this.sources[i].run(indexSink, scheduler$$1);\n    }\n\n    return disposeAll(disposables);\n  };\n\n  return Zip;\n}();\n\nvar ZipSink = /*#__PURE__*/function (_Pipe) {\n  inherits(ZipSink, _Pipe);\n\n  function ZipSink(f, buffers, sinks, sink) {\n    classCallCheck(this, ZipSink);\n\n    var _this = possibleConstructorReturn(this, _Pipe.call(this, sink));\n\n    _this.f = f;\n    _this.sinks = sinks;\n    _this.buffers = buffers;\n    return _this;\n  }\n\n  ZipSink.prototype.event = function event(t, indexedValue) {\n    /* eslint complexity: [1, 5] */\n    if (!indexedValue.active) {\n      this._dispose(t, indexedValue.index);\n      return;\n    }\n\n    var buffers = this.buffers;\n    var buffer = buffers[indexedValue.index];\n\n    buffer.push(indexedValue.value);\n\n    if (buffer.length() === 1) {\n      if (!ready(this.buffers)) {\n        return;\n      }\n\n      emitZipped(this.f, t, buffers, this.sink);\n\n      if (ended(this.buffers, this.sinks)) {\n        this.sink.end(t);\n      }\n    }\n  };\n\n  ZipSink.prototype._dispose = function _dispose(t, index) {\n    var buffer = this.buffers[index];\n    if (buffer.isEmpty()) {\n      this.sink.end(t);\n    }\n  };\n\n  return ZipSink;\n}(Pipe);\n\nvar emitZipped = function emitZipped(f, t, buffers, sink) {\n  return sink.event(t, invoke(f, map(head, buffers)));\n};\n\nvar head = function head(buffer) {\n  return buffer.shift();\n};\n\nfunction ended(buffers, sinks) {\n  for (var i = 0, l = buffers.length; i < l; ++i) {\n    if (buffers[i].isEmpty() && !sinks[i].active) {\n      return true;\n    }\n  }\n  return false;\n}\n\nfunction ready(buffers) {\n  for (var i = 0, l = buffers.length; i < l; ++i) {\n    if (buffers[i].isEmpty()) {\n      return false;\n    }\n  }\n  return true;\n}\n\n/** @license MIT License (c) copyright 2010-2016 original author or authors */\n/** @author Brian Cavalier */\n/** @author John Hann */\n\n/**\n * Given a stream of streams, return a new stream that adopts the behavior\n * of the most recent inner stream.\n * @param {Stream} stream of streams on which to switch\n * @returns {Stream} switching stream\n */\nvar switchLatest = function switchLatest(stream) {\n  return isCanonicalEmpty(stream) ? empty() : new Switch(stream);\n};\n\nvar Switch = /*#__PURE__*/function () {\n  function Switch(source) {\n    classCallCheck(this, Switch);\n\n    this.source = source;\n  }\n\n  Switch.prototype.run = function run(sink, scheduler$$1) {\n    var switchSink = new SwitchSink(sink, scheduler$$1);\n    return disposeBoth(switchSink, this.source.run(switchSink, scheduler$$1));\n  };\n\n  return Switch;\n}();\n\nvar SwitchSink = /*#__PURE__*/function () {\n  function SwitchSink(sink, scheduler$$1) {\n    classCallCheck(this, SwitchSink);\n\n    this.sink = sink;\n    this.scheduler = scheduler$$1;\n    this.current = null;\n    this.ended = false;\n  }\n\n  SwitchSink.prototype.event = function event(t, stream) {\n    this._disposeCurrent(t);\n    this.current = new Segment(stream, t, Infinity, this, this.sink, this.scheduler);\n  };\n\n  SwitchSink.prototype.end = function end(t) {\n    this.ended = true;\n    this._checkEnd(t);\n  };\n\n  SwitchSink.prototype.error = function error(t, e) {\n    this.ended = true;\n    this.sink.error(t, e);\n  };\n\n  SwitchSink.prototype.dispose = function dispose() {\n    return this._disposeCurrent(currentTime(this.scheduler));\n  };\n\n  SwitchSink.prototype._disposeCurrent = function _disposeCurrent(t) {\n    if (this.current !== null) {\n      return this.current._dispose(t);\n    }\n  };\n\n  SwitchSink.prototype._disposeInner = function _disposeInner(t, inner) {\n    inner._dispose(t);\n    if (inner === this.current) {\n      this.current = null;\n    }\n  };\n\n  SwitchSink.prototype._checkEnd = function _checkEnd(t) {\n    if (this.ended && this.current === null) {\n      this.sink.end(t);\n    }\n  };\n\n  SwitchSink.prototype._endInner = function _endInner(t, inner) {\n    this._disposeInner(t, inner);\n    this._checkEnd(t);\n  };\n\n  SwitchSink.prototype._errorInner = function _errorInner(t, e, inner) {\n    this._disposeInner(t, inner);\n    this.sink.error(t, e);\n  };\n\n  return SwitchSink;\n}();\n\nvar Segment = /*#__PURE__*/function () {\n  function Segment(source, min, max, outer, sink, scheduler$$1) {\n    classCallCheck(this, Segment);\n\n    this.min = min;\n    this.max = max;\n    this.outer = outer;\n    this.sink = sink;\n    this.disposable = source.run(this, schedulerRelativeTo(min, scheduler$$1));\n  }\n\n  Segment.prototype.event = function event(t, x) {\n    var time = Math.max(0, t + this.min);\n    if (time < this.max) {\n      this.sink.event(time, x);\n    }\n  };\n\n  Segment.prototype.end = function end(t) {\n    this.outer._endInner(t + this.min, this);\n  };\n\n  Segment.prototype.error = function error(t, e) {\n    this.outer._errorInner(t + this.min, e, this);\n  };\n\n  Segment.prototype._dispose = function _dispose(t) {\n    tryDispose(t + this.min, this.disposable, this.sink);\n  };\n\n  return Segment;\n}();\n\n/** @license MIT License (c) copyright 2010-2016 original author or authors */\n/** @author Brian Cavalier */\n/** @author John Hann */\n\n/**\n * Retain only items matching a predicate\n * @param {function(x:*):boolean} p filtering predicate called for each item\n * @param {Stream} stream stream to filter\n * @returns {Stream} stream containing only items for which predicate returns truthy\n */\nvar filter$1 = function filter(p, stream) {\n  return Filter.create(p, stream);\n};\n\n/**\n * Skip repeated events, using === to detect duplicates\n * @param {Stream} stream stream from which to omit repeated events\n * @returns {Stream} stream without repeated events\n */\nvar skipRepeats = function skipRepeats(stream) {\n  return skipRepeatsWith$1(same, stream);\n};\n\n/**\n * Skip repeated events using the provided equals function to detect duplicates\n * @param {function(a:*, b:*):boolean} equals optional function to compare items\n * @param {Stream} stream stream from which to omit repeated events\n * @returns {Stream} stream without repeated events\n */\nvar skipRepeatsWith$1 = function skipRepeatsWith(equals, stream) {\n  return isCanonicalEmpty(stream) ? empty() : new SkipRepeats(equals, stream);\n};\n\nvar SkipRepeats = /*#__PURE__*/function () {\n  function SkipRepeats(equals, source) {\n    classCallCheck(this, SkipRepeats);\n\n    this.equals = equals;\n    this.source = source;\n  }\n\n  SkipRepeats.prototype.run = function run(sink, scheduler$$1) {\n    return this.source.run(new SkipRepeatsSink(this.equals, sink), scheduler$$1);\n  };\n\n  return SkipRepeats;\n}();\n\nvar SkipRepeatsSink = /*#__PURE__*/function (_Pipe) {\n  inherits(SkipRepeatsSink, _Pipe);\n\n  function SkipRepeatsSink(equals, sink) {\n    classCallCheck(this, SkipRepeatsSink);\n\n    var _this = possibleConstructorReturn(this, _Pipe.call(this, sink));\n\n    _this.equals = equals;\n    _this.value = void 0;\n    _this.init = true;\n    return _this;\n  }\n\n  SkipRepeatsSink.prototype.event = function event(t, x) {\n    if (this.init) {\n      this.init = false;\n      this.value = x;\n      this.sink.event(t, x);\n    } else if (!this.equals(this.value, x)) {\n      this.value = x;\n      this.sink.event(t, x);\n    }\n  };\n\n  return SkipRepeatsSink;\n}(Pipe);\n\nfunction same(a, b) {\n  return a === b;\n}\n\n/** @license MIT License (c) copyright 2010-2016 original author or authors */\n/** @author Brian Cavalier */\n/** @author John Hann */\n\nvar until$1 = function until(signal, stream) {\n  return new Until(signal, stream);\n};\n\nvar since$1 = function since(signal, stream) {\n  return new Since(signal, stream);\n};\n\nvar during$1 = function during(timeWindow, stream) {\n  return until$1(join(timeWindow), since$1(timeWindow, stream));\n};\n\nvar Until = /*#__PURE__*/function () {\n  function Until(maxSignal, source) {\n    classCallCheck(this, Until);\n\n    this.maxSignal = maxSignal;\n    this.source = source;\n  }\n\n  Until.prototype.run = function run(sink, scheduler$$1) {\n    var min = new Bound(-Infinity, sink);\n    var max = new UpperBound(this.maxSignal, sink, scheduler$$1);\n    var disposable$$1 = this.source.run(new TimeWindowSink(min, max, sink), scheduler$$1);\n\n    return disposeAll([min, max, disposable$$1]);\n  };\n\n  return Until;\n}();\n\nvar Since = /*#__PURE__*/function () {\n  function Since(minSignal, source) {\n    classCallCheck(this, Since);\n\n    this.minSignal = minSignal;\n    this.source = source;\n  }\n\n  Since.prototype.run = function run(sink, scheduler$$1) {\n    var min = new LowerBound(this.minSignal, sink, scheduler$$1);\n    var max = new Bound(Infinity, sink);\n    var disposable$$1 = this.source.run(new TimeWindowSink(min, max, sink), scheduler$$1);\n\n    return disposeAll([min, max, disposable$$1]);\n  };\n\n  return Since;\n}();\n\nvar Bound = /*#__PURE__*/function (_Pipe) {\n  inherits(Bound, _Pipe);\n\n  function Bound(value, sink) {\n    classCallCheck(this, Bound);\n\n    var _this = possibleConstructorReturn(this, _Pipe.call(this, sink));\n\n    _this.value = value;\n    return _this;\n  }\n\n  Bound.prototype.event = function event() {};\n\n  Bound.prototype.end = function end() {};\n\n  Bound.prototype.dispose = function dispose() {};\n\n  return Bound;\n}(Pipe);\n\nvar TimeWindowSink = /*#__PURE__*/function (_Pipe2) {\n  inherits(TimeWindowSink, _Pipe2);\n\n  function TimeWindowSink(min, max, sink) {\n    classCallCheck(this, TimeWindowSink);\n\n    var _this2 = possibleConstructorReturn(this, _Pipe2.call(this, sink));\n\n    _this2.min = min;\n    _this2.max = max;\n    return _this2;\n  }\n\n  TimeWindowSink.prototype.event = function event(t, x) {\n    if (t >= this.min.value && t < this.max.value) {\n      this.sink.event(t, x);\n    }\n  };\n\n  return TimeWindowSink;\n}(Pipe);\n\nvar LowerBound = /*#__PURE__*/function (_Pipe3) {\n  inherits(LowerBound, _Pipe3);\n\n  function LowerBound(signal, sink, scheduler$$1) {\n    classCallCheck(this, LowerBound);\n\n    var _this3 = possibleConstructorReturn(this, _Pipe3.call(this, sink));\n\n    _this3.value = Infinity;\n    _this3.disposable = signal.run(_this3, scheduler$$1);\n    return _this3;\n  }\n\n  LowerBound.prototype.event = function event(t /*, x */) {\n    if (t < this.value) {\n      this.value = t;\n    }\n  };\n\n  LowerBound.prototype.end = function end() {};\n\n  LowerBound.prototype.dispose = function dispose() {\n    return this.disposable.dispose();\n  };\n\n  return LowerBound;\n}(Pipe);\n\nvar UpperBound = /*#__PURE__*/function (_Pipe4) {\n  inherits(UpperBound, _Pipe4);\n\n  function UpperBound(signal, sink, scheduler$$1) {\n    classCallCheck(this, UpperBound);\n\n    var _this4 = possibleConstructorReturn(this, _Pipe4.call(this, sink));\n\n    _this4.value = Infinity;\n    _this4.disposable = signal.run(_this4, scheduler$$1);\n    return _this4;\n  }\n\n  UpperBound.prototype.event = function event(t, x) {\n    if (t < this.value) {\n      this.value = t;\n      this.sink.end(t);\n    }\n  };\n\n  UpperBound.prototype.end = function end() {};\n\n  UpperBound.prototype.dispose = function dispose() {\n    return this.disposable.dispose();\n  };\n\n  return UpperBound;\n}(Pipe);\n\n/** @license MIT License (c) copyright 2010-2016 original author or authors */\n/** @author Brian Cavalier */\n/** @author John Hann */\n\n/**\n * @param {Number} delayTime milliseconds to delay each item\n * @param {Stream} stream\n * @returns {Stream} new stream containing the same items, but delayed by ms\n */\nvar delay$2 = function delay$$1(delayTime, stream) {\n  return delayTime <= 0 ? stream : new Delay(delayTime, stream);\n};\n\nvar Delay = /*#__PURE__*/function () {\n  function Delay(dt, source) {\n    classCallCheck(this, Delay);\n\n    this.dt = dt;\n    this.source = source;\n  }\n\n  Delay.prototype.run = function run(sink, scheduler$$1) {\n    var delaySink = new DelaySink(this.dt, sink, scheduler$$1);\n    return disposeBoth(delaySink, this.source.run(delaySink, scheduler$$1));\n  };\n\n  return Delay;\n}();\n\nvar DelaySink = /*#__PURE__*/function (_Pipe) {\n  inherits(DelaySink, _Pipe);\n\n  function DelaySink(dt, sink, scheduler$$1) {\n    classCallCheck(this, DelaySink);\n\n    var _this = possibleConstructorReturn(this, _Pipe.call(this, sink));\n\n    _this.dt = dt;\n    _this.scheduler = scheduler$$1;\n    return _this;\n  }\n\n  DelaySink.prototype.dispose = function dispose() {\n    var _this2 = this;\n\n    cancelAllTasks(function (task) {\n      return task.sink === _this2.sink;\n    }, this.scheduler);\n  };\n\n  DelaySink.prototype.event = function event(t, x) {\n    delay(this.dt, propagateEventTask$1(x, this.sink), this.scheduler);\n  };\n\n  DelaySink.prototype.end = function end(t) {\n    delay(this.dt, propagateEndTask(this.sink), this.scheduler);\n  };\n\n  return DelaySink;\n}(Pipe);\n\n/** @license MIT License (c) copyright 2010-2017 original author or authors */\n\n/**\n * Limit the rate of events by suppressing events that occur too often\n * @param {Number} period time to suppress events\n * @param {Stream} stream\n * @returns {Stream}\n */\nvar throttle$1 = function throttle(period, stream) {\n  return isCanonicalEmpty(stream) ? empty() : stream instanceof Map ? commuteMapThrottle(period, stream) : stream instanceof Throttle ? fuseThrottle(period, stream) : new Throttle(period, stream);\n};\n\nvar commuteMapThrottle = function commuteMapThrottle(period, mapStream) {\n  return Map.create(mapStream.f, throttle$1(period, mapStream.source));\n};\n\nvar fuseThrottle = function fuseThrottle(period, throttleStream) {\n  return new Throttle(Math.max(period, throttleStream.period), throttleStream.source);\n};\n\nvar Throttle = /*#__PURE__*/function () {\n  function Throttle(period, source) {\n    classCallCheck(this, Throttle);\n\n    this.period = period;\n    this.source = source;\n  }\n\n  Throttle.prototype.run = function run(sink, scheduler$$1) {\n    return this.source.run(new ThrottleSink(this.period, sink), scheduler$$1);\n  };\n\n  return Throttle;\n}();\n\nvar ThrottleSink = /*#__PURE__*/function (_Pipe) {\n  inherits(ThrottleSink, _Pipe);\n\n  function ThrottleSink(period, sink) {\n    classCallCheck(this, ThrottleSink);\n\n    var _this = possibleConstructorReturn(this, _Pipe.call(this, sink));\n\n    _this.time = 0;\n    _this.period = period;\n    return _this;\n  }\n\n  ThrottleSink.prototype.event = function event(t, x) {\n    if (t >= this.time) {\n      this.time = t + this.period;\n      this.sink.event(t, x);\n    }\n  };\n\n  return ThrottleSink;\n}(Pipe);\n/**\n * Wait for a burst of events to subside and emit only the last event in the burst\n * @param {Number} period events occuring more frequently than this\n *  will be suppressed\n * @param {Stream} stream stream to debounce\n * @returns {Stream} new debounced stream\n */\n\n\nvar debounce$1 = function debounce(period, stream) {\n  return isCanonicalEmpty(stream) ? empty() : new Debounce(period, stream);\n};\n\nvar Debounce = /*#__PURE__*/function () {\n  function Debounce(dt, source) {\n    classCallCheck(this, Debounce);\n\n    this.dt = dt;\n    this.source = source;\n  }\n\n  Debounce.prototype.run = function run(sink, scheduler$$1) {\n    return new DebounceSink(this.dt, this.source, sink, scheduler$$1);\n  };\n\n  return Debounce;\n}();\n\nvar DebounceSink = /*#__PURE__*/function () {\n  function DebounceSink(dt, source, sink, scheduler$$1) {\n    classCallCheck(this, DebounceSink);\n\n    this.dt = dt;\n    this.sink = sink;\n    this.scheduler = scheduler$$1;\n    this.value = void 0;\n    this.timer = null;\n\n    this.disposable = source.run(this, scheduler$$1);\n  }\n\n  DebounceSink.prototype.event = function event(t, x) {\n    this._clearTimer();\n    this.value = x;\n    this.timer = delay(this.dt, new DebounceTask(this, x), this.scheduler);\n  };\n\n  DebounceSink.prototype._event = function _event(t, x) {\n    this._clearTimer();\n    this.sink.event(t, x);\n  };\n\n  DebounceSink.prototype.end = function end(t) {\n    if (this._clearTimer()) {\n      this.sink.event(t, this.value);\n      this.value = undefined;\n    }\n    this.sink.end(t);\n  };\n\n  DebounceSink.prototype.error = function error(t, x) {\n    this._clearTimer();\n    this.sink.error(t, x);\n  };\n\n  DebounceSink.prototype.dispose = function dispose() {\n    this._clearTimer();\n    this.disposable.dispose();\n  };\n\n  DebounceSink.prototype._clearTimer = function _clearTimer() {\n    if (this.timer === null) {\n      return false;\n    }\n    this.timer.dispose();\n    this.timer = null;\n    return true;\n  };\n\n  return DebounceSink;\n}();\n\nvar DebounceTask = /*#__PURE__*/function () {\n  function DebounceTask(debounce, value) {\n    classCallCheck(this, DebounceTask);\n\n    this.debounce = debounce;\n    this.value = value;\n  }\n\n  DebounceTask.prototype.run = function run(t) {\n    this.debounce._event(t, this.value);\n  };\n\n  DebounceTask.prototype.error = function error(t, e) {\n    this.debounce.error(t, e);\n  };\n\n  DebounceTask.prototype.dispose = function dispose() {};\n\n  return DebounceTask;\n}();\n\n/** @license MIT License (c) copyright 2010-2016 original author or authors */\n/** @author Brian Cavalier */\n/** @author John Hann */\n\n/**\n * Turn a Stream<Promise<T>> into Stream<T> by awaiting each promise.\n * Event order is preserved. The stream will fail if any promise rejects.\n */\nvar awaitPromises = function awaitPromises(stream) {\n  return isCanonicalEmpty(stream) ? empty() : new Await(stream);\n};\n\n/**\n * Create a stream containing only the promise's fulfillment\n * value at the time it fulfills.\n * @param {Promise<T>} p promise\n * @return {Stream<T>} stream containing promise's fulfillment value.\n *  If the promise rejects, the stream will error\n */\nvar fromPromise = /*#__PURE__*/compose(awaitPromises, now);\n\nvar Await = /*#__PURE__*/function () {\n  function Await(source) {\n    classCallCheck(this, Await);\n\n    this.source = source;\n  }\n\n  Await.prototype.run = function run(sink, scheduler$$1) {\n    return this.source.run(new AwaitSink(sink, scheduler$$1), scheduler$$1);\n  };\n\n  return Await;\n}();\n\nvar AwaitSink = /*#__PURE__*/function () {\n  function AwaitSink(sink, scheduler$$1) {\n    var _this = this;\n\n    classCallCheck(this, AwaitSink);\n\n    this.sink = sink;\n    this.scheduler = scheduler$$1;\n    this.queue = Promise.resolve();\n\n    // Pre-create closures, to avoid creating them per event\n    this._eventBound = function (x) {\n      return _this.sink.event(currentTime(_this.scheduler), x);\n    };\n    this._endBound = function () {\n      return _this.sink.end(currentTime(_this.scheduler));\n    };\n    this._errorBound = function (e) {\n      return _this.sink.error(currentTime(_this.scheduler), e);\n    };\n  }\n\n  AwaitSink.prototype.event = function event(t, promise) {\n    var _this2 = this;\n\n    this.queue = this.queue.then(function () {\n      return _this2._event(promise);\n    }).catch(this._errorBound);\n  };\n\n  AwaitSink.prototype.end = function end(t) {\n    this.queue = this.queue.then(this._endBound).catch(this._errorBound);\n  };\n\n  AwaitSink.prototype.error = function error(t, e) {\n    var _this3 = this;\n\n    // Don't resolve error values, propagate directly\n    this.queue = this.queue.then(function () {\n      return _this3._errorBound(e);\n    }).catch(fatalError);\n  };\n\n  AwaitSink.prototype._event = function _event(promise) {\n    return promise.then(this._eventBound);\n  };\n\n  return AwaitSink;\n}();\n\n/** @license MIT License (c) copyright 2010-2016 original author or authors */\n/** @author Brian Cavalier */\n/** @author John Hann */\n\nvar SafeSink = /*#__PURE__*/function () {\n  function SafeSink(sink) {\n    classCallCheck(this, SafeSink);\n\n    this.sink = sink;\n    this.active = true;\n  }\n\n  SafeSink.prototype.event = function event(t, x) {\n    if (!this.active) {\n      return;\n    }\n    this.sink.event(t, x);\n  };\n\n  SafeSink.prototype.end = function end(t, x) {\n    if (!this.active) {\n      return;\n    }\n    this.disable();\n    this.sink.end(t, x);\n  };\n\n  SafeSink.prototype.error = function error(t, e) {\n    this.disable();\n    this.sink.error(t, e);\n  };\n\n  SafeSink.prototype.disable = function disable() {\n    this.active = false;\n    return this.sink;\n  };\n\n  return SafeSink;\n}();\n\n/** @license MIT License (c) copyright 2010-2016 original author or authors */\n/** @author Brian Cavalier */\n/** @author John Hann */\n\nfunction tryEvent(t, x, sink) {\n  try {\n    sink.event(t, x);\n  } catch (e) {\n    sink.error(t, e);\n  }\n}\n\nfunction tryEnd(t, sink) {\n  try {\n    sink.end(t);\n  } catch (e) {\n    sink.error(t, e);\n  }\n}\n\n/** @license MIT License (c) copyright 2010-2016 original author or authors */\n/** @author Brian Cavalier */\n/** @author John Hann */\n\n/**\n * If stream encounters an error, recover and continue with items from stream\n * returned by f.\n * @param {function(error:*):Stream} f function which returns a new stream\n * @param {Stream} stream\n * @returns {Stream} new stream which will recover from an error by calling f\n */\nvar recoverWith$1 = function recoverWith(f, stream) {\n  return isCanonicalEmpty(stream) ? empty() : new RecoverWith(f, stream);\n};\n\n/**\n * Create a stream containing only an error\n * @param {*} e error value, preferably an Error or Error subtype\n * @returns {Stream} new stream containing only an error\n */\nvar throwError = function throwError(e) {\n  return new ErrorStream(e);\n};\n\nvar ErrorStream = /*#__PURE__*/function () {\n  function ErrorStream(e) {\n    classCallCheck(this, ErrorStream);\n\n    this.value = e;\n  }\n\n  ErrorStream.prototype.run = function run(sink, scheduler$$1) {\n    return asap(propagateErrorTask$1(this.value, sink), scheduler$$1);\n  };\n\n  return ErrorStream;\n}();\n\nvar RecoverWith = /*#__PURE__*/function () {\n  function RecoverWith(f, source) {\n    classCallCheck(this, RecoverWith);\n\n    this.f = f;\n    this.source = source;\n  }\n\n  RecoverWith.prototype.run = function run(sink, scheduler$$1) {\n    return new RecoverWithSink(this.f, this.source, sink, scheduler$$1);\n  };\n\n  return RecoverWith;\n}();\n\nvar RecoverWithSink = /*#__PURE__*/function () {\n  function RecoverWithSink(f, source, sink, scheduler$$1) {\n    classCallCheck(this, RecoverWithSink);\n\n    this.f = f;\n    this.sink = new SafeSink(sink);\n    this.scheduler = scheduler$$1;\n    this.disposable = source.run(this, scheduler$$1);\n  }\n\n  RecoverWithSink.prototype.event = function event(t, x) {\n    tryEvent(t, x, this.sink);\n  };\n\n  RecoverWithSink.prototype.end = function end(t) {\n    tryEnd(t, this.sink);\n  };\n\n  RecoverWithSink.prototype.error = function error(t, e) {\n    var nextSink = this.sink.disable();\n\n    tryDispose(t, this.disposable, this.sink);\n\n    this._startNext(t, e, nextSink);\n  };\n\n  RecoverWithSink.prototype._startNext = function _startNext(t, x, sink) {\n    try {\n      this.disposable = this._continue(this.f, t, x, sink);\n    } catch (e) {\n      sink.error(t, e);\n    }\n  };\n\n  RecoverWithSink.prototype._continue = function _continue(f, t, x, sink) {\n    return run$1(sink, this.scheduler, withLocalTime$1(t, f(x)));\n  };\n\n  RecoverWithSink.prototype.dispose = function dispose() {\n    return this.disposable.dispose();\n  };\n\n  return RecoverWithSink;\n}();\n\nvar multicast = function multicast(stream) {\n  return stream instanceof Multicast || isCanonicalEmpty(stream) ? stream : new Multicast(stream);\n};\n\nvar Multicast = /*#__PURE__*/function () {\n  function Multicast(source) {\n    classCallCheck(this, Multicast);\n\n    this.source = new MulticastSource(source);\n  }\n\n  Multicast.prototype.run = function run(sink, scheduler$$1) {\n    return this.source.run(sink, scheduler$$1);\n  };\n\n  return Multicast;\n}();\n\nvar MulticastSource = /*#__PURE__*/function () {\n  function MulticastSource(source) {\n    classCallCheck(this, MulticastSource);\n\n    this.source = source;\n    this.sinks = [];\n    this.disposable = disposeNone();\n  }\n\n  MulticastSource.prototype.run = function run(sink, scheduler$$1) {\n    var n = this.add(sink);\n    if (n === 1) {\n      this.disposable = this.source.run(this, scheduler$$1);\n    }\n    return disposeOnce(new MulticastDisposable(this, sink));\n  };\n\n  MulticastSource.prototype.dispose = function dispose() {\n    var disposable$$1 = this.disposable;\n    this.disposable = disposeNone();\n    return disposable$$1.dispose();\n  };\n\n  MulticastSource.prototype.add = function add(sink) {\n    this.sinks = append(sink, this.sinks);\n    return this.sinks.length;\n  };\n\n  MulticastSource.prototype.remove = function remove$$1(sink) {\n    var i = findIndex(sink, this.sinks);\n    // istanbul ignore next\n    if (i >= 0) {\n      this.sinks = remove(i, this.sinks);\n    }\n\n    return this.sinks.length;\n  };\n\n  MulticastSource.prototype.event = function event(time, value) {\n    var s = this.sinks;\n    if (s.length === 1) {\n      return s[0].event(time, value);\n    }\n    for (var i = 0; i < s.length; ++i) {\n      tryEvent(time, value, s[i]);\n    }\n  };\n\n  MulticastSource.prototype.end = function end(time) {\n    var s = this.sinks;\n    for (var i = 0; i < s.length; ++i) {\n      tryEnd(time, s[i]);\n    }\n  };\n\n  MulticastSource.prototype.error = function error(time, err) {\n    var s = this.sinks;\n    for (var i = 0; i < s.length; ++i) {\n      s[i].error(time, err);\n    }\n  };\n\n  return MulticastSource;\n}();\n\nvar MulticastDisposable = /*#__PURE__*/function () {\n  function MulticastDisposable(source, sink) {\n    classCallCheck(this, MulticastDisposable);\n\n    this.source = source;\n    this.sink = sink;\n  }\n\n  MulticastDisposable.prototype.dispose = function dispose() {\n    if (this.source.remove(this.sink) === 0) {\n      this.source.dispose();\n    }\n  };\n\n  return MulticastDisposable;\n}();\n\n/** @license MIT License (c) copyright 2016 original author or authors */\n/* eslint-disable import/first */\nvar zipItems$$1 = /*#__PURE__*/curry3(zipItems$1);\nvar withItems$$1 = /*#__PURE__*/curry2(withItems$1);\n\n// -----------------------------------------------------------------------\n// Observing\n\nvar runEffects$$1 = /*#__PURE__*/curry2(runEffects$1);\nvar run$$1 = /*#__PURE__*/curry3(run$1);\n\n// -------------------------------------------------------\n\nvar withLocalTime$$1 = /*#__PURE__*/curry2(withLocalTime$1);\n\n// -------------------------------------------------------\n\nvar loop$$1 = /*#__PURE__*/curry3(loop$1);\n\n// -------------------------------------------------------\n\nvar scan$$1 = /*#__PURE__*/curry3(scan$1);\n\n// -----------------------------------------------------------------------\n// Extending\n\nvar startWith$$1 = /*#__PURE__*/curry2(startWith$1);\n\n// -----------------------------------------------------------------------\n// Transforming\n\nvar map$1 = /*#__PURE__*/curry2(map$2);\nvar constant$$1 = /*#__PURE__*/curry2(constant$1);\nvar tap$$1 = /*#__PURE__*/curry2(tap$1);\nvar ap$$1 = /*#__PURE__*/curry2(ap$1);\n\n// -----------------------------------------------------------------------\n// FlatMapping\n\nvar chain$$1 = /*#__PURE__*/curry2(chain$1);\nvar continueWith$$1 = /*#__PURE__*/curry2(continueWith$1);\n\nvar concatMap$$1 = /*#__PURE__*/curry2(concatMap$1);\n\n// -----------------------------------------------------------------------\n// Concurrent merging\n\nvar mergeConcurrently$$1 = /*#__PURE__*/curry2(mergeConcurrently$1);\nvar mergeMapConcurrently$$1 = /*#__PURE__*/curry3(mergeMapConcurrently$1);\n\n// -----------------------------------------------------------------------\n// Merging\n\nvar merge$$1 = /*#__PURE__*/curry2(merge$1);\n// -----------------------------------------------------------------------\n// Combining\n\nvar combine$$1 = /*#__PURE__*/curry3(combine$1);\nvar combineArray$$1 = /*#__PURE__*/curry2(combineArray$1);\n\n// -----------------------------------------------------------------------\n// Sampling\n\nvar sample$$1 = /*#__PURE__*/curry2(sample$1);\nvar snapshot$$1 = /*#__PURE__*/curry3(snapshot$1);\n\n// -----------------------------------------------------------------------\n// Zipping\n\nvar zip$$1 = /*#__PURE__*/curry3(zip$1);\nvar zipArray$$1 = /*#__PURE__*/curry2(zipArray$1);\n\n// -----------------------------------------------------------------------\n// Filtering\n\nvar filter$$1 = /*#__PURE__*/curry2(filter$1);\nvar skipRepeatsWith$$1 = /*#__PURE__*/curry2(skipRepeatsWith$1);\n\n// -----------------------------------------------------------------------\n// Slicing\n\nvar take$$1 = /*#__PURE__*/curry2(take$1);\nvar skip$$1 = /*#__PURE__*/curry2(skip$1);\nvar slice$$1 = /*#__PURE__*/curry3(slice$1);\nvar takeWhile$$1 = /*#__PURE__*/curry2(takeWhile$1);\nvar skipWhile$$1 = /*#__PURE__*/curry2(skipWhile$1);\nvar skipAfter$$1 = /*#__PURE__*/curry2(skipAfter$1);\n\n// -----------------------------------------------------------------------\n// Time slicing\n\nvar until$$1 = /*#__PURE__*/curry2(until$1);\nvar since$$1 = /*#__PURE__*/curry2(since$1);\nvar during$$1 = /*#__PURE__*/curry2(during$1);\n\n// -----------------------------------------------------------------------\n// Delaying\n\nvar delay$1 = /*#__PURE__*/curry2(delay$2);\n\n// -----------------------------------------------------------------------\n// Rate limiting\n\nvar throttle$$1 = /*#__PURE__*/curry2(throttle$1);\nvar debounce$$1 = /*#__PURE__*/curry2(debounce$1);\n\n// -----------------------------------------------------------------------\n// Error handling\n\nvar recoverWith$$1 = /*#__PURE__*/curry2(recoverWith$1);\n// ----------------------------------------------------------------------\nvar propagateTask$$1 = /*#__PURE__*/curry3(propagateTask$1);\nvar propagateEventTask$$1 = /*#__PURE__*/curry2(propagateEventTask$1);\nvar propagateErrorTask$$1 = /*#__PURE__*/curry2(propagateErrorTask$1);\n\nexport { zipItems$$1 as zipItems, withItems$$1 as withItems, runEffects$$1 as runEffects, run$$1 as run, withLocalTime$$1 as withLocalTime, loop$$1 as loop, scan$$1 as scan, startWith$$1 as startWith, map$1 as map, constant$$1 as constant, tap$$1 as tap, ap$$1 as ap, chain$$1 as chain, join, continueWith$$1 as continueWith, concatMap$$1 as concatMap, mergeConcurrently$$1 as mergeConcurrently, mergeMapConcurrently$$1 as mergeMapConcurrently, merge$$1 as merge, mergeArray, combine$$1 as combine, combineArray$$1 as combineArray, sample$$1 as sample, snapshot$$1 as snapshot, zip$$1 as zip, zipArray$$1 as zipArray, filter$$1 as filter, skipRepeats, skipRepeatsWith$$1 as skipRepeatsWith, take$$1 as take, skip$$1 as skip, slice$$1 as slice, takeWhile$$1 as takeWhile, skipWhile$$1 as skipWhile, skipAfter$$1 as skipAfter, until$$1 as until, since$$1 as since, during$$1 as during, delay$1 as delay, throttle$$1 as throttle, debounce$$1 as debounce, recoverWith$$1 as recoverWith, throwError, propagateTask$$1 as propagateTask, propagateEventTask$$1 as propagateEventTask, propagateErrorTask$$1 as propagateErrorTask, propagateEndTask, empty, never, now, at, periodic$1 as periodic, newStream, switchLatest, fromPromise, awaitPromises, multicast, MulticastSource };\n//# sourceMappingURL=index.es.js.map\n","import { curry2, curry3, findIndex, removeAll } from '@most/prelude';\n\n/** @license MIT License (c) copyright 2010-2017 original author or authors */\n\nvar ScheduledTask = function ScheduledTask (time, localOffset, period, task, scheduler) {\n  this.time = time;\n  this.localOffset = localOffset;\n  this.period = period;\n  this.task = task;\n  this.scheduler = scheduler;\n  this.active = true;\n};\n\nScheduledTask.prototype.run = function run () {\n  return this.task.run(this.time - this.localOffset)\n};\n\nScheduledTask.prototype.error = function error (e) {\n  return this.task.error(this.time - this.localOffset, e)\n};\n\nScheduledTask.prototype.dispose = function dispose () {\n  this.scheduler.cancel(this);\n  return this.task.dispose()\n};\n\nvar RelativeScheduler = function RelativeScheduler (origin, scheduler) {\n  this.origin = origin;\n  this.scheduler = scheduler;\n};\n\nRelativeScheduler.prototype.currentTime = function currentTime () {\n  return this.scheduler.currentTime() - this.origin\n};\n\nRelativeScheduler.prototype.scheduleTask = function scheduleTask (localOffset, delay, period, task) {\n  return this.scheduler.scheduleTask(localOffset + this.origin, delay, period, task)\n};\n\nRelativeScheduler.prototype.relative = function relative (origin) {\n  return new RelativeScheduler(origin + this.origin, this.scheduler)\n};\n\nRelativeScheduler.prototype.cancel = function cancel (task) {\n  return this.scheduler.cancel(task)\n};\n\nRelativeScheduler.prototype.cancelAll = function cancelAll (f) {\n  return this.scheduler.cancelAll(f)\n};\n\n/** @license MIT License (c) copyright 2010-2017 original author or authors */\n\nvar defer = function (task) { return Promise.resolve(task).then(runTask); };\n\nfunction runTask (task) {\n  try {\n    return task.run()\n  } catch (e) {\n    return task.error(e)\n  }\n}\n\n/** @license MIT License (c) copyright 2010-2017 original author or authors */\n\nvar Scheduler = function Scheduler (timer, timeline) {\n  var this$1 = this;\n\n  this.timer = timer;\n  this.timeline = timeline;\n\n  this._timer = null;\n  this._nextArrival = Infinity;\n\n  this._runReadyTasksBound = function () { return this$1._runReadyTasks(this$1.currentTime()); };\n};\n\nScheduler.prototype.currentTime = function currentTime () {\n  return this.timer.now()\n};\n\nScheduler.prototype.scheduleTask = function scheduleTask (localOffset, delay, period, task) {\n  var time = this.currentTime() + Math.max(0, delay);\n  var st = new ScheduledTask(time, localOffset, period, task, this);\n\n  this.timeline.add(st);\n  this._scheduleNextRun();\n  return st\n};\n\nScheduler.prototype.relative = function relative (offset) {\n  return new RelativeScheduler(offset, this)\n};\n\nScheduler.prototype.cancel = function cancel (task) {\n  task.active = false;\n  if (this.timeline.remove(task)) {\n    this._reschedule();\n  }\n};\n\nScheduler.prototype.cancelAll = function cancelAll (f) {\n  this.timeline.removeAll(f);\n  this._reschedule();\n};\n\nScheduler.prototype._reschedule = function _reschedule () {\n  if (this.timeline.isEmpty()) {\n    this._unschedule();\n  } else {\n    this._scheduleNextRun(this.currentTime());\n  }\n};\n\nScheduler.prototype._unschedule = function _unschedule () {\n  this.timer.clearTimer(this._timer);\n  this._timer = null;\n};\n\nScheduler.prototype._scheduleNextRun = function _scheduleNextRun () { // eslint-disable-line complexity\n  if (this.timeline.isEmpty()) {\n    return\n  }\n\n  var nextArrival = this.timeline.nextArrival();\n\n  if (this._timer === null) {\n    this._scheduleNextArrival(nextArrival);\n  } else if (nextArrival < this._nextArrival) {\n    this._unschedule();\n    this._scheduleNextArrival(nextArrival);\n  }\n};\n\nScheduler.prototype._scheduleNextArrival = function _scheduleNextArrival (nextArrival) {\n  this._nextArrival = nextArrival;\n  var delay = Math.max(0, nextArrival - this.currentTime());\n  this._timer = this.timer.setTimer(this._runReadyTasksBound, delay);\n};\n\nScheduler.prototype._runReadyTasks = function _runReadyTasks () {\n  this._timer = null;\n  this.timeline.runTasks(this.currentTime(), runTask);\n  this._scheduleNextRun();\n};\n\n/** @license MIT License (c) copyright 2010-2017 original author or authors */\n\nvar Timeline = function Timeline () {\n  this.tasks = [];\n};\n\nTimeline.prototype.nextArrival = function nextArrival () {\n  return this.isEmpty() ? Infinity : this.tasks[0].time\n};\n\nTimeline.prototype.isEmpty = function isEmpty () {\n  return this.tasks.length === 0\n};\n\nTimeline.prototype.add = function add (st) {\n  insertByTime(st, this.tasks);\n};\n\nTimeline.prototype.remove = function remove (st) {\n  var i = binarySearch(getTime(st), this.tasks);\n\n  if (i >= 0 && i < this.tasks.length) {\n    var at = findIndex(st, this.tasks[i].events);\n    if (at >= 0) {\n      this.tasks[i].events.splice(at, 1);\n      return true\n    }\n  }\n\n  return false\n};\n\nTimeline.prototype.removeAll = function removeAll$$1 (f) {\n    var this$1 = this;\n\n  for (var i = 0; i < this.tasks.length; ++i) {\n    removeAllFrom(f, this$1.tasks[i]);\n  }\n};\n\nTimeline.prototype.runTasks = function runTasks (t, runTask) {\n    var this$1 = this;\n\n  var tasks = this.tasks;\n  var l = tasks.length;\n  var i = 0;\n\n  while (i < l && tasks[i].time <= t) {\n    ++i;\n  }\n\n  this.tasks = tasks.slice(i);\n\n  // Run all ready tasks\n  for (var j = 0; j < i; ++j) {\n    this$1.tasks = runReadyTasks(runTask, tasks[j].events, this$1.tasks);\n  }\n};\n\nfunction runReadyTasks (runTask, events, tasks) { // eslint-disable-line complexity\n  for (var i = 0; i < events.length; ++i) {\n    var task = events[i];\n\n    if (task.active) {\n      runTask(task);\n\n      // Reschedule periodic repeating tasks\n      // Check active again, since a task may have canceled itself\n      if (task.period >= 0 && task.active) {\n        task.time = task.time + task.period;\n        insertByTime(task, tasks);\n      }\n    }\n  }\n\n  return tasks\n}\n\nfunction insertByTime (task, timeslots) {\n  var l = timeslots.length;\n  var time = getTime(task);\n\n  if (l === 0) {\n    timeslots.push(newTimeslot(time, [task]));\n    return\n  }\n\n  var i = binarySearch(time, timeslots);\n\n  if (i >= l) {\n    timeslots.push(newTimeslot(time, [task]));\n  } else {\n    insertAtTimeslot(task, timeslots, time, i);\n  }\n}\n\nfunction insertAtTimeslot (task, timeslots, time, i) {\n  var timeslot = timeslots[i];\n  if (time === timeslot.time) {\n    addEvent(task, timeslot.events, time);\n  } else {\n    timeslots.splice(i, 0, newTimeslot(time, [task]));\n  }\n}\n\nfunction addEvent (task, events) {\n  if (events.length === 0 || task.time >= events[events.length - 1].time) {\n    events.push(task);\n  } else {\n    spliceEvent(task, events);\n  }\n}\n\nfunction spliceEvent (task, events) {\n  for (var j = 0; j < events.length; j++) {\n    if (task.time < events[j].time) {\n      events.splice(j, 0, task);\n      break\n    }\n  }\n}\n\nfunction getTime (scheduledTask) {\n  return Math.floor(scheduledTask.time)\n}\n\nfunction removeAllFrom (f, timeslot) {\n  timeslot.events = removeAll(f, timeslot.events);\n}\n\nfunction binarySearch (t, sortedArray) { // eslint-disable-line complexity\n  var lo = 0;\n  var hi = sortedArray.length;\n  var mid, y;\n\n  while (lo < hi) {\n    mid = Math.floor((lo + hi) / 2);\n    y = sortedArray[mid];\n\n    if (t === y.time) {\n      return mid\n    } else if (t < y.time) {\n      hi = mid;\n    } else {\n      lo = mid + 1;\n    }\n  }\n  return hi\n}\n\nvar newTimeslot = function (t, events) { return ({ time: t, events: events }); };\n\n/** @license MIT License (c) copyright 2010-2017 original author or authors */\n\n/* global setTimeout, clearTimeout */\n\nvar ClockTimer = function ClockTimer (clock) {\n  this._clock = clock;\n};\n\nClockTimer.prototype.now = function now () {\n  return this._clock.now()\n};\n\nClockTimer.prototype.setTimer = function setTimer (f, dt) {\n  return dt <= 0 ? runAsap(f) : setTimeout(f, dt)\n};\n\nClockTimer.prototype.clearTimer = function clearTimer (t) {\n  return t instanceof Asap ? t.cancel() : clearTimeout(t)\n};\n\nvar Asap = function Asap (f) {\n  this.f = f;\n  this.active = true;\n};\n\nAsap.prototype.run = function run () {\n  return this.active && this.f()\n};\n\nAsap.prototype.error = function error (e) {\n  throw e\n};\n\nAsap.prototype.cancel = function cancel () {\n  this.active = false;\n};\n\nfunction runAsap (f) {\n  var task = new Asap(f);\n  defer(task);\n  return task\n}\n\n/** @license MIT License (c) copyright 2010-2017 original author or authors */\n\n/* global performance, process */\n\nvar RelativeClock = function RelativeClock (clock, origin) {\n  this.origin = origin;\n  this.clock = clock;\n};\n\nRelativeClock.prototype.now = function now () {\n  return this.clock.now() - this.origin\n};\n\nvar HRTimeClock = function HRTimeClock (hrtime, origin) {\n  this.origin = origin;\n  this.hrtime = hrtime;\n};\n\nHRTimeClock.prototype.now = function now () {\n  var hrt = this.hrtime(this.origin);\n  return (hrt[0] * 1e9 + hrt[1]) / 1e6\n};\n\nvar clockRelativeTo = function (clock) { return new RelativeClock(clock, clock.now()); };\n\nvar newPerformanceClock = function () { return clockRelativeTo(performance); };\n\nvar newDateClock = function () { return clockRelativeTo(Date); };\n\nvar newHRTimeClock = function () { return new HRTimeClock(process.hrtime, process.hrtime()); };\n\nvar newPlatformClock = function () {\n  if (typeof performance !== 'undefined' && typeof performance.now === 'function') {\n    return newPerformanceClock()\n  } else if (typeof process !== 'undefined' && typeof process.hrtime === 'function') {\n    return newHRTimeClock()\n  }\n\n  return newDateClock()\n};\n\n// Read the current time from the provided Scheduler\nvar currentTime = function (scheduler) { return scheduler.currentTime(); };\n\n// Schedule a task to run as soon as possible, but\n// not in the current call stack\nvar asap = curry2(function (task, scheduler) { return scheduler.scheduleTask(0, 0, -1, task); });\n\n// Schedule a task to run after a millisecond delay\nvar delay = curry3(function (delay, task, scheduler) { return scheduler.scheduleTask(0, delay, -1, task); });\n\n// Schedule a task to run periodically, with the\n// first run starting asap\nvar periodic = curry3(function (period, task, scheduler) { return scheduler.scheduleTask(0, 0, period, task); });\n\n// Cancel a scheduledTask\nvar cancelTask = function (scheduledTask) { return scheduledTask.dispose(); };\n\n// Cancel all ScheduledTasks for which a predicate\n// is true\nvar cancelAllTasks = curry2(function (predicate, scheduler) { return scheduler.cancelAll(predicate); });\n\nvar schedulerRelativeTo = curry2(function (offset, scheduler) { return new RelativeScheduler(offset, scheduler); });\n\n/** @license MIT License (c) copyright 2010-2017 original author or authors */\n\nvar newScheduler = curry2(function (timer, timeline) { return new Scheduler(timer, timeline); });\n\nvar newDefaultScheduler = function () { return new Scheduler(newDefaultTimer(), new Timeline()); };\n\nvar newDefaultTimer = function () { return new ClockTimer(newPlatformClock()); };\nvar newClockTimer = function (clock) { return new ClockTimer(clock); };\n\nvar newTimeline = function () { return new Timeline(); };\n\nexport { newScheduler, newDefaultScheduler, newDefaultTimer, newClockTimer, newTimeline, RelativeClock, HRTimeClock, clockRelativeTo, newPerformanceClock, newDateClock, newHRTimeClock, newPlatformClock, currentTime, asap, delay, periodic, cancelTask, cancelAllTasks, schedulerRelativeTo };\n//# sourceMappingURL=index.es.js.map\n","import { currentTime } from '@most/scheduler';\n\n/** @license MIT License (c) copyright 2015-2016 original author or authors */\n/** @author Brian Cavalier */\n// domEvent :: (EventTarget t, Event e) => String -> t -> boolean=false -> Stream e\nvar domEvent = function (event, node, capture) {\n    if ( capture === void 0 ) capture = false;\n\n    return new DomEvent(event, node, capture);\n};\n\nvar blur = function (node, capture) {\n  if ( capture === void 0 ) capture = false;\n\n  return domEvent('blur', node, capture);\n};\nvar focus = function (node, capture) {\n  if ( capture === void 0 ) capture = false;\n\n  return domEvent('focus', node, capture);\n};\nvar focusin = function (node, capture) {\n  if ( capture === void 0 ) capture = false;\n\n  return domEvent('focusin', node, capture);\n};\nvar focusout = function (node, capture) {\n  if ( capture === void 0 ) capture = false;\n\n  return domEvent('focusout', node, capture);\n};\nvar click = function (node, capture) {\n  if ( capture === void 0 ) capture = false;\n\n  return domEvent('click', node, capture);\n};\nvar dblclick = function (node, capture) {\n  if ( capture === void 0 ) capture = false;\n\n  return domEvent('dblclick', node, capture);\n};\nvar mousedown = function (node, capture) {\n  if ( capture === void 0 ) capture = false;\n\n  return domEvent('mousedown', node, capture);\n};\nvar mouseup = function (node, capture) {\n  if ( capture === void 0 ) capture = false;\n\n  return domEvent('mouseup', node, capture);\n};\nvar mousemove = function (node, capture) {\n  if ( capture === void 0 ) capture = false;\n\n  return domEvent('mousemove', node, capture);\n};\nvar mouseover = function (node, capture) {\n  if ( capture === void 0 ) capture = false;\n\n  return domEvent('mouseover', node, capture);\n};\nvar mouseenter = function (node, capture) {\n  if ( capture === void 0 ) capture = false;\n\n  return domEvent('mouseenter', node, capture);\n};\nvar mouseout = function (node, capture) {\n  if ( capture === void 0 ) capture = false;\n\n  return domEvent('mouseout', node, capture);\n};\nvar mouseleave = function (node, capture) {\n  if ( capture === void 0 ) capture = false;\n\n  return domEvent('mouseleave', node, capture);\n};\nvar change = function (node, capture) {\n  if ( capture === void 0 ) capture = false;\n\n  return domEvent('change', node, capture);\n};\nvar select = function (node, capture) {\n  if ( capture === void 0 ) capture = false;\n\n  return domEvent('select', node, capture);\n};\nvar submit = function (node, capture) {\n  if ( capture === void 0 ) capture = false;\n\n  return domEvent('submit', node, capture);\n};\nvar keydown = function (node, capture) {\n  if ( capture === void 0 ) capture = false;\n\n  return domEvent('keydown', node, capture);\n};\nvar keypress = function (node, capture) {\n  if ( capture === void 0 ) capture = false;\n\n  return domEvent('keypress', node, capture);\n};\nvar keyup = function (node, capture) {\n  if ( capture === void 0 ) capture = false;\n\n  return domEvent('keyup', node, capture);\n};\nvar input = function (node, capture) {\n  if ( capture === void 0 ) capture = false;\n\n  return domEvent('input', node, capture);\n};\nvar contextmenu = function (node, capture) {\n  if ( capture === void 0 ) capture = false;\n\n  return domEvent('contextmenu', node, capture);\n};\nvar resize = function (node, capture) {\n  if ( capture === void 0 ) capture = false;\n\n  return domEvent('resize', node, capture);\n};\nvar scroll = function (node, capture) {\n  if ( capture === void 0 ) capture = false;\n\n  return domEvent('scroll', node, capture);\n};\nvar error = function (node, capture) {\n  if ( capture === void 0 ) capture = false;\n\n  return domEvent('error', node, capture);\n};\n\nvar hashchange = function (node, capture) {\n  if ( capture === void 0 ) capture = false;\n\n  return domEvent('hashchange', node, capture);\n};\nvar popstate = function (node, capture) {\n  if ( capture === void 0 ) capture = false;\n\n  return domEvent('popstate', node, capture);\n};\nvar load = function (node, capture) {\n  if ( capture === void 0 ) capture = false;\n\n  return domEvent('load', node, capture);\n};\nvar unload = function (node, capture) {\n  if ( capture === void 0 ) capture = false;\n\n  return domEvent('unload', node, capture);\n};\n\nvar pointerdown = function (node, capture) {\n  if ( capture === void 0 ) capture = false;\n\n  return domEvent('pointerdown', node, capture);\n};\nvar pointerup = function (node, capture) {\n  if ( capture === void 0 ) capture = false;\n\n  return domEvent('pointerup', node, capture);\n};\nvar pointermove = function (node, capture) {\n  if ( capture === void 0 ) capture = false;\n\n  return domEvent('pointermove', node, capture);\n};\nvar pointerover = function (node, capture) {\n  if ( capture === void 0 ) capture = false;\n\n  return domEvent('pointerover', node, capture);\n};\nvar pointerenter = function (node, capture) {\n  if ( capture === void 0 ) capture = false;\n\n  return domEvent('pointerenter', node, capture);\n};\nvar pointerout = function (node, capture) {\n  if ( capture === void 0 ) capture = false;\n\n  return domEvent('pointerout', node, capture);\n};\nvar pointerleave = function (node, capture) {\n  if ( capture === void 0 ) capture = false;\n\n  return domEvent('pointerleave', node, capture);\n};\n\nvar touchstart = function (node, capture) {\n  if ( capture === void 0 ) capture = false;\n\n  return domEvent('touchstart', node, capture);\n};\nvar touchend = function (node, capture) {\n  if ( capture === void 0 ) capture = false;\n\n  return domEvent('touchend', node, capture);\n};\nvar touchmove = function (node, capture) {\n  if ( capture === void 0 ) capture = false;\n\n  return domEvent('touchmove', node, capture);\n};\nvar touchcancel = function (node, capture) {\n  if ( capture === void 0 ) capture = false;\n\n  return domEvent('touchcancel', node, capture);\n};\n\nvar DomEvent = function DomEvent (event, node, capture) {\n  this.event = event;\n  this.node = node;\n  this.capture = capture;\n};\n\nDomEvent.prototype.run = function run (sink, scheduler$$1) {\n    var this$1 = this;\n\n  var send = function (e) { return tryEvent(currentTime(scheduler$$1), e, sink); };\n  var dispose = function () { return this$1.node.removeEventListener(this$1.event, send, this$1.capture); };\n\n  this.node.addEventListener(this.event, send, this.capture);\n\n  return { dispose: dispose }\n};\n\nfunction tryEvent (t, x, sink) {\n  try {\n    sink.event(t, x);\n  } catch (e) {\n    sink.error(t, e);\n  }\n}\n\nexport { domEvent, blur, focus, focusin, focusout, click, dblclick, mousedown, mouseup, mousemove, mouseover, mouseenter, mouseout, mouseleave, change, select, submit, keydown, keypress, keyup, input, contextmenu, resize, scroll, error, hashchange, popstate, load, unload, pointerdown, pointerup, pointermove, pointerover, pointerenter, pointerout, pointerleave, touchstart, touchend, touchmove, touchcancel };\n//# sourceMappingURL=index.es.js.map\n","import { combine, map, runEffects, startWith, tap } from '@most/core'\nimport { newDefaultScheduler } from '@most/scheduler'\nimport { input } from '@most/dom-event'\n\n// Display the result of adding two inputs.\n// The result is reactive and updates whenever *either* input changes.\n\nconst xInput = document.querySelector('input.x')\nconst yInput = document.querySelector('input.y')\nconst resultNode = document.querySelector('.result')\n\nconst add = (x, y) => x + y\nconst toNumber = e => Number(e.target.value)\nconst renderResult = result => { resultNode.textContent = result }\n\n// x represents the current value of xInput\nconst x = startWith(0, map(toNumber, input(xInput)))\n\n// y represents the current value of yInput\nconst y = startWith(0, map(toNumber, input(yInput)))\n\n// result is the live current value of adding x and y\nconst result = combine(add, x, y)\n\n// Observe the result value by rendering it to the resultNode\nrunEffects(tap(renderResult, result), newDefaultScheduler())\n"],"names":["append","x","a","l","length","b","Array","i","map","f","reduce","z","r","remove","TypeError","unsafeRemove","j","removeAll","findIndex","compose","g","curry2","curried","arguments","curry3","c","classCallCheck","instance","Constructor","ScheduledTask","time","localOffset","period","task","scheduler","active","prototype","run","error","e","dispose","cancel","RelativeScheduler","origin","currentTime","scheduleTask","delay","relative","cancelAll","defer","Promise","resolve","then","runTask","Scheduler","timer","timeline","_this","_timer","_nextArrival","Infinity","_runReadyTasksBound","_runReadyTasks","now","Math","max","st","add","_scheduleNextRun","offset","_reschedule","isEmpty","_unschedule","clearTimer","nextArrival","_scheduleNextArrival","setTimer","runTasks","Timeline","tasks","insertByTime","binarySearch","getTime","at","events","splice","removeAll$$1","removeAllFrom","t","slice","runReadyTasks","timeslots","push","newTimeslot","insertAtTimeslot","timeslot","addEvent","spliceEvent","scheduledTask","floor","sortedArray","lo","hi","mid","y","ClockTimer","clock","_clock","dt","runAsap","setTimeout","Asap","clearTimeout","RelativeClock","HRTimeClock","hrtime","hrt","clockRelativeTo","newPerformanceClock","performance","newDateClock","Date","newHRTimeClock","process","newPlatformClock","asap","periodic","cancelAllTasks","predicate","schedulerRelativeTo","newDefaultScheduler","newDefaultTimer","disposeNone","NONE","DisposeNone","isDisposeNone","d","disposeOnce","disposable","DisposeOnce","disposed","undefined","DisposeWith","resource","_dispose","_resource","disposeAll","ds","merged","merge","DisposeAll","disposeBoth","d1","d2","concat","disposables","throwIfErrors","disposeCollectErrors","appendIfError","errors","DisposeAllError","Error","message","call","name","captureStackTrace","stack","formatErrorStacks","Object","create","formatErrorStack","s","tryDispose","sink","fatalError","rethrow","inherits","subClass","superClass","constructor","value","enumerable","writable","configurable","setPrototypeOf","__proto__","possibleConstructorReturn","self","ReferenceError","propagateTask$1","propagateTask","PropagateTask","propagateEventTask$1","propagateEventTask","runEvent","propagateEndTask","runEnd","propagateErrorTask$1","propagateErrorTask","runError","_run","event","_","end","empty","EMPTY","isCanonicalEmpty","stream","containsCanonicalEmpty","streams","some","Empty","scheduler$$1","Never","NEVER","At","runAt","Periodic","Pipe","Filter","p","source","FilterSink","and","_Pipe","q","FilterMap","FilterMapSink","Map","MapSink","SettableDisposable","setDisposable","disposable$$1","Slice","bounds","sliceSink","SliceSink","min","skip","take","TakeWhile","takeWhileSink","TakeWhileSink","_Pipe2","_this2","SkipWhile","SkipWhileSink","_Pipe3","_this3","skipping","SkipAfter","SkipAfterSink","_Pipe4","_this4","ZipItems","items","ZipItemsSink","index","runEffects$1","reject","runStream","observer","RunEffectsSink","_end","_error","_disposable","tryDispose$1","run$1","RelativeSink","withLocalTime$1","withLocalTime","WithLocalTime","relativeSink","Loop","stepper","seed","step","LoopSink","result","Scan","ScanSink","continueWith$1","continueWith","ContinueWith","ContinueWithSink","_startNext","_continue","startWith$1","startWith","map$2","map$$1","tap$1","tap","Tap","TapSink","IndexSink","_Sink","invoke","args","apply","combine$1","combine","stream1","stream2","combineArray$1","combineArray","Combine","sources","sinks","mergeSink","CombineSink","indexSink","awaiting","values","hasValue","fill","activeCount","indexedValue","_updateReady","LinkedList","head","prev","next","remove$$1","MergeConcurrently","concurrency","Outer","pending","current","_addInner","_startInner","_initInner","innerSink","Inner","mapAndRun","_checkEnd","_endInner","inner","shift","outer","Merge","MergeSink","indexValue","Snapshot","sampler","sampleSink","SnapshotSink","valuesDisposable","latest","samplerDisposable","LatestValueSink","HEAD_MAX_SHRINK","TAIL_MIN_SHRINK","Queue","_head","_tail","_capacityMask","_list","tail","_growArray","_shrinkArray","_copyArray","newArray","list","len","Zip","buffers","zipSink","ZipSink","buffer","ready","emitZipped","ended","Switch","switchSink","SwitchSink","_disposeCurrent","Segment","_disposeInner","_errorInner","SkipRepeats","equals","SkipRepeatsSink","init","Until","maxSignal","Bound","UpperBound","TimeWindowSink","Since","minSignal","LowerBound","signal","Delay","delaySink","DelaySink","Throttle","ThrottleSink","Debounce","DebounceSink","_clearTimer","DebounceTask","_event","debounce","Await","AwaitSink","queue","_eventBound","_endBound","_errorBound","promise","catch","SafeSink","disable","tryEvent","tryEnd","ErrorStream","RecoverWith","RecoverWithSink","nextSink","Multicast","MulticastSource","n","MulticastDisposable","err","runEffects$$1","startWith$$1","map$1","tap$$1","combine$$1","domEvent","node","capture","DomEvent","input","this$1","send","removeEventListener","addEventListener","xInput","document","querySelector","yInput","resultNode","toNumber","Number","target","renderResult","textContent","runEffects"],"mappings":"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"}